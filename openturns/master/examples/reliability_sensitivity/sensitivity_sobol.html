
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Estimate Sobol’ indices for the Ishigami function by a sampling method &#8212; OpenTURNS 1.15dev documentation</title>
    <link rel="stylesheet" href="../../_static/openturns.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sobol’ sensitivity indices from chaos" href="functional_chaos_sensitivity.html" />
    <link rel="prev" title="System events" href="event_system.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="functional_chaos_sensitivity.html" title="Sobol’ sensitivity indices from chaos"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="event_system.html" title="System events"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.15dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="reliability_sensitivity.html" accesskey="U">Reliability, sensitivity</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Estimate Sobol’ indices for the Ishigami function by a sampling method</a><ul>
<li><a class="reference internal" href="#Introduction">Introduction</a></li>
<li><a class="reference internal" href="#Define-the-model">Define the model</a></li>
<li><a class="reference internal" href="#Draw-the-function">Draw the function</a></li>
<li><a class="reference internal" href="#Estimate-the-Sobol’-indices">Estimate the Sobol’ indices</a></li>
<li><a class="reference internal" href="#Estimate-the-second-order-indices">Estimate the second order indices</a></li>
<li><a class="reference internal" href="#Using-a-different-estimator">Using a different estimator</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="event_system.html"
                        title="previous chapter">System events</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="functional_chaos_sensitivity.html"
                        title="next chapter">Sobol’ sensitivity indices from chaos</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/examples/reliability_sensitivity/sensitivity_sobol.ipynb"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Estimate-Sobol’-indices-for-the-Ishigami-function-by-a-sampling-method">
<h1>Estimate Sobol’ indices for the Ishigami function by a sampling method<a class="headerlink" href="#Estimate-Sobol’-indices-for-the-Ishigami-function-by-a-sampling-method" title="Permalink to this headline">¶</a></h1>
<p>In this example, we estimate the Sobol’ indices for the Ishigami function by sampling methods.</p>
<p>Let <img class="math" src="../../_images/math/18e88e002a30c98db52f9ff1e04cebf89ddeae55.svg" alt="a=7" style="vertical-align: 0px"/> and <img class="math" src="../../_images/math/5dea9e9b130221ccb4b7c175182e37f421cc41cc.svg" alt="b=0.1" style="vertical-align: 0px"/>. We consider the function</p>
<div class="math">
<p><img src="../../_images/math/d2d79a2a1e608d1f109d43b53261276652bb9731.svg" alt="g(X_1,X_2,X_3) = \sin(X_1)+a \sin (X_2)^2 + b X_3^4 \sin(X_1)"/></p>
</div><p>for any <img class="math" src="../../_images/math/dfb09e35eba35fefd35899f447cf6c501f995aa7.svg" alt="X_1,X_2,X_3\in[-\pi,\pi]" style="vertical-align: -4px"/></p>
<p>We assume that the random variables <img class="math" src="../../_images/math/7c05174d825623f831d1ddedf71489dd203a1d36.svg" alt="X_1,X_2,X_3" style="vertical-align: -3px"/> are independent and have the uniform marginal distribution in the interval from <img class="math" src="../../_images/math/49820ec0489b306e3ad2115a74ad92283786b037.svg" alt="-\pi" style="vertical-align: -1px"/> to <img class="math" src="../../_images/math/ca83bc91cfad4324b4084cdb204568cfc806d8e4.svg" alt="\pi" style="vertical-align: 0px"/>:</p>
<div class="math">
<p><img src="../../_images/math/4b0664dde8f61c2006643cafdc6c6db67465b1bb.svg" alt="X_1,X_2,X_3\sim \mathcal{U}(-\pi,\pi)."/></p>
</div><div class="section" id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">¶</a></h2>
<p>In this example we are going to quantify the correlation between the input variables and the output variable of a model thanks to the Sobol indices.</p>
<p>The Sobol indices allow to evaluate the importance of a single variable or a specific set of variables. Here the Sobol indices are estimated by sampling, from two input samples and a numerical function.</p>
<p>In theory, Sobol indices range is <img class="math" src="../../_images/math/a8f412b4a50c74f89105adfea2c91aaa1c8dd6b8.svg" alt="\left[0; 1\right]" style="vertical-align: -4px"/> ; the more the indice value is close to 1 the more the variable is important toward the output of the function.</p>
<p>Let us denote by <img class="math" src="../../_images/math/5da6e6d65e4ae3032c58fe8c94955247fc4ebe22.svg" alt="d" style="vertical-align: 0px"/> the input dimension of the model.</p>
<p>The Sobol’ indices can be computed at different orders.</p>
<ul class="simple">
<li><p>The first order indices evaluate the importance of one variable at a time.</p></li>
<li><p>The <img class="math" src="../../_images/math/5da6e6d65e4ae3032c58fe8c94955247fc4ebe22.svg" alt="d" style="vertical-align: 0px"/> total indices give the relative importance of every variables except the variable <img class="math" src="../../_images/math/56c02f12d2f1519026c2ada380fc921e0d8a0a69.svg" alt="X_i" style="vertical-align: -2px"/>, for every variable.</p></li>
<li><p>In general, we are only interested in first order and total Sobol’ indices. There are situations, however, where we want to estimate interactions. The second order indices evaluate the importance of every pair of variables; this represents</p></li>
</ul>
<div class="math">
<p><img src="../../_images/math/8b198fb3bbd82de58a359ca5d420ae0c93523b02.svg" alt="\binom{d}{2} = \frac{d \times \left( d-1\right) }{2}"/></p>
</div><p>indices.</p>
<p>In practice, when the number of input variables is not small (say, when <img class="math" src="../../_images/math/7786b4510604faae718eb7ec90aae43db41ec5c9.svg" alt="d&gt;5" style="vertical-align: 0px"/>), then the number of second order indices is too large for being easy to analyze. In these situations, we limit the analysis to the first order and total Sobol’ indices.</p>
</div>
<div class="section" id="Define-the-model">
<h2>Define the model<a class="headerlink" href="#Define-the-model" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">openturns</span> <span class="kn">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<p>Create the Ishigami test function.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ot</span><span class="o">.</span><span class="n">RandomGenerator</span><span class="o">.</span><span class="n">SetSeed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">formula</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sin(X1) + 7. * sin(X2)^2 + 0.1 * X3^4 * sin(X1)&#39;</span><span class="p">]</span>
<span class="n">input_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;X1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">,</span> <span class="s1">&#39;X3&#39;</span><span class="p">]</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SymbolicFunction</span><span class="p">(</span><span class="n">input_names</span><span class="p">,</span> <span class="n">formula</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Create the probabilistic model</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">inputDimension</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">distributionList</span> <span class="o">=</span> <span class="p">[</span><span class="n">ot</span><span class="o">.</span><span class="n">Uniform</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)]</span> <span class="o">*</span> <span class="n">inputDimension</span>
<span class="n">distribution</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">ComposedDistribution</span><span class="p">(</span><span class="n">distributionList</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Draw-the-function">
<h2>Draw the function<a class="headerlink" href="#Draw-the-function" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">sampleX</span> <span class="o">=</span> <span class="n">distribution</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">sampleY</span> <span class="o">=</span> <span class="n">g</span><span class="p">(</span><span class="n">sampleX</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">plotXvsY</span><span class="p">(</span><span class="n">sampleX</span><span class="p">,</span> <span class="n">sampleY</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">3</span><span class="p">)):</span>
    <span class="kn">import</span> <span class="nn">pylab</span> <span class="kn">as</span> <span class="nn">pl</span>
    <span class="kn">import</span> <span class="nn">openturns.viewer</span>
    <span class="n">dimX</span> <span class="o">=</span> <span class="n">sampleX</span><span class="o">.</span><span class="n">getDimension</span><span class="p">()</span>
    <span class="n">inputdescr</span> <span class="o">=</span> <span class="n">sampleX</span><span class="o">.</span><span class="n">getDescription</span><span class="p">()</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dimX</span><span class="p">):</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dimX</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">graph</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">inputdescr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">cloud</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Cloud</span><span class="p">(</span><span class="n">sampleX</span><span class="p">[:,</span><span class="n">i</span><span class="p">],</span><span class="n">sampleY</span><span class="p">)</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cloud</span><span class="p">)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="n">ax</span><span class="p">])</span>
    <span class="k">return</span> <span class="bp">None</span>

<span class="n">plotXvsY</span><span class="p">(</span><span class="n">sampleX</span><span class="p">,</span> <span class="n">sampleY</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ot</span><span class="o">.</span><span class="n">HistogramFactory</span><span class="p">()</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">sampleY</span><span class="p">)</span><span class="o">.</span><span class="n">drawPDF</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_reliability_sensitivity_sensitivity_sobol_11_0.png" src="../../_images/examples_reliability_sensitivity_sensitivity_sobol_11_0.png" />
</div>
</div>
<p>We see that the distribution of the output has two modes.</p>
</div>
<div class="section" id="Estimate-the-Sobol’-indices">
<h2>Estimate the Sobol’ indices<a class="headerlink" href="#Estimate-the-Sobol’-indices" title="Permalink to this headline">¶</a></h2>
<p>We first create a design of experiments with the <code class="docutils literal notranslate"><span class="pre">SobolIndicesExperiment</span></code>. Since we are not interested in the second order indices for the moment, we use the default value of the third argument (we will come back to this topic later).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">size</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">sie</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SobolIndicesExperiment</span><span class="p">(</span><span class="n">distribution</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="n">inputDesign</span> <span class="o">=</span> <span class="n">sie</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
<span class="n">inputDesign</span><span class="o">.</span><span class="n">setDescription</span><span class="p">(</span><span class="n">input_names</span><span class="p">)</span>
<span class="n">inputDesign</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>5000
</pre></div>
</div>
</div>
<p>We see that 5000 function evaluations are required to estimate the first order and total Sobol’ indices.</p>
<p>Then we evaluate the outputs corresponding to this design of experiments.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">outputDesign</span> <span class="o">=</span> <span class="n">g</span><span class="p">(</span><span class="n">inputDesign</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Then we estimate the Sobol’ indices with the <code class="docutils literal notranslate"><span class="pre">SaltelliSensitivityAlgorithm</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sensitivityAnalysis</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SaltelliSensitivityAlgorithm</span><span class="p">(</span><span class="n">inputDesign</span><span class="p">,</span> <span class="n">outputDesign</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">getFirstOrderIndices</span></code> and <code class="docutils literal notranslate"><span class="pre">getTotalOrderIndices</span></code> method returns the estimates of the Sobol’ indices.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sensitivityAnalysis</span><span class="o">.</span><span class="n">getFirstOrderIndices</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<p>[0.334197,0.42868,-0.0246479]</p></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sensitivityAnalysis</span><span class="o">.</span><span class="n">getTotalOrderIndices</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<p>[0.538721,0.440278,0.2622]</p></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">draw</span></code> method produces the following graphics. The vertical bars represents 95% confidence intervals of the estimates.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">sensitivityAnalysis</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">graph</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_reliability_sensitivity_sensitivity_sobol_25_0.png" src="../../_images/examples_reliability_sensitivity_sensitivity_sobol_25_0.png" />
</div>
</div>
<ul class="simple">
<li><p>We see that the variable <img class="math" src="../../_images/math/62d59fb7f8f04bccb5f423e857e56202c3105759.svg" alt="X_1" style="vertical-align: -2px"/>, with a total Sobol’ indice close to 0.6, is the most significant variable, taking into account its effet by itself or with its interactions with other variables. The first order indice is close to 0.3, which implies that, for the interactions (and only the interactions) produce almost 0.3 of the total variance.</p></li>
<li><p>The variable <img class="math" src="../../_images/math/20725757d04eeeb6cb8640e563c83209178ff65c.svg" alt="X_2" style="vertical-align: -2px"/> has the highest first order indice, but has no interactions since the total order indice is close to the first order indice. Its total Sobol’ indice is approximately equal to 0.4.</p></li>
<li><p>The variable <img class="math" src="../../_images/math/95abe78c151b2cb0c10ff82e5a32d90ffddbea56.svg" alt="X_3" style="vertical-align: -2px"/> has a first order indice close to zero. However, it has an impact to the total variance thanks to its interactions with <img class="math" src="../../_images/math/62d59fb7f8f04bccb5f423e857e56202c3105759.svg" alt="X_1" style="vertical-align: -2px"/>.</p></li>
<li><p>We see that, because of the sampling, the variability of the Sobol’ indices estimates is quite large, even with a relatively large sample size. Moreover, since the exact first order Sobol’ indice for <img class="math" src="../../_images/math/95abe78c151b2cb0c10ff82e5a32d90ffddbea56.svg" alt="X_3" style="vertical-align: -2px"/> is zero, its estimate has 50% chance of being nonpositive.</p></li>
</ul>
</div>
<div class="section" id="Estimate-the-second-order-indices">
<h2>Estimate the second order indices<a class="headerlink" href="#Estimate-the-second-order-indices" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">size</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">computeSecondOrder</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">sie</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SobolIndicesExperiment</span><span class="p">(</span><span class="n">distribution</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">computeSecondOrder</span><span class="p">)</span>
<span class="n">inputDesign</span> <span class="o">=</span> <span class="n">sie</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">inputDesign</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span>
<span class="n">inputDesign</span><span class="o">.</span><span class="n">setDescription</span><span class="p">(</span><span class="n">input_names</span><span class="p">)</span>
<span class="n">outputDesign</span> <span class="o">=</span> <span class="n">g</span><span class="p">(</span><span class="n">inputDesign</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
8000
</pre></div></div>
</div>
<p>We see that 8000 function evaluations are now required; this is 3000 more evaluations than in the previous situation.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sensitivityAnalysis</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SaltelliSensitivityAlgorithm</span><span class="p">(</span><span class="n">inputDesign</span><span class="p">,</span> <span class="n">outputDesign</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">second_order</span> <span class="o">=</span> <span class="n">sensitivityAnalysis</span><span class="o">.</span><span class="n">getSecondOrderIndices</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">inputDimension</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;2nd order indice (</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)=</span><span class="si">%g</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">second_order</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2nd order indice (1,0)=-0.0805798
2nd order indice (2,0)=0.0914596
2nd order indice (2,1)=-0.0988192
</pre></div></div>
</div>
<p>This shows that only the interaction between <img class="math" src="../../_images/math/62d59fb7f8f04bccb5f423e857e56202c3105759.svg" alt="X_1" style="vertical-align: -2px"/> and <img class="math" src="../../_images/math/95abe78c151b2cb0c10ff82e5a32d90ffddbea56.svg" alt="X_3" style="vertical-align: -2px"/> is significant (beware of the index shift between the Python indice and the mathematical one).</p>
</div>
<div class="section" id="Using-a-different-estimator">
<h2>Using a different estimator<a class="headerlink" href="#Using-a-different-estimator" title="Permalink to this headline">¶</a></h2>
<p>We have used the <code class="docutils literal notranslate"><span class="pre">SaltelliSensitivityAlgorithm</span></code> class to estimate the indices. Other classes are available in the library; the following list presents all the available estimators. * <code class="docutils literal notranslate"><span class="pre">SaltelliSensitivityAlgorithm</span></code> * <code class="docutils literal notranslate"><span class="pre">MartinezSensitivityAlgorithm</span></code> * <code class="docutils literal notranslate"><span class="pre">JansenSensitivityAlgorithm</span></code> * <code class="docutils literal notranslate"><span class="pre">MauntzKucherenkoSensitivityAlgorithm</span></code></p>
<p>In order to compare the results with another method, we use the <code class="docutils literal notranslate"><span class="pre">MartinezSensitivityAlgorithm</span></code> class.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sensitivityAnalysis</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MartinezSensitivityAlgorithm</span><span class="p">(</span><span class="n">inputDesign</span><span class="p">,</span> <span class="n">outputDesign</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">sensitivityAnalysis</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">graph</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_reliability_sensitivity_sensitivity_sobol_36_0.png" src="../../_images/examples_reliability_sensitivity_sensitivity_sobol_36_0.png" />
</div>
</div>
<p>We see that this does not change significantly the results in this particular situation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="functional_chaos_sensitivity.html" title="Sobol’ sensitivity indices from chaos"
             >next</a> |</li>
        <li class="right" >
          <a href="event_system.html" title="System events"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.15dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="reliability_sensitivity.html" >Reliability, sensitivity</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2018 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Jan 01, 2018.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.0+/50badc717.
    </div>
  </body>
</html>