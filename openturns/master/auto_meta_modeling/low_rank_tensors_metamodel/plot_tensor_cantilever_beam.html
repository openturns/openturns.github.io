
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tensor approximation of the cantilever beam model &#8212; OpenTURNS 1.19dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/openturns.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/mysearchtools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Validation of a Karhunen-Loeve decomposition" href="../fields_metamodels/plot_karhunenloeve_validation.html" />
    <link rel="prev" title="Kriging : draw covariance models" href="../kriging_metamodel/plot_draw_covariance_models.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://openturns.discourse.group/">Forum</a></li>
    <li><a href="https://gitter.im/openturns/community">Chat</a></li>
    <li><a href="https://github.com/openturns/openturns/wiki/Modules">Modules</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../fields_metamodels/plot_karhunenloeve_validation.html" title="Validation of a Karhunen-Loeve decomposition"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../kriging_metamodel/plot_draw_covariance_models.html" title="Kriging : draw covariance models"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.19dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" accesskey="U">Meta modeling</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tensor approximation of the cantilever beam model</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Tensor approximation of the cantilever beam model</a><ul>
<li><a class="reference internal" href="#definition-of-the-model">Definition of the model</a></li>
<li><a class="reference internal" href="#create-the-design-of-experiments">Create the design of experiments</a></li>
<li><a class="reference internal" href="#create-the-metamodel">Create the metamodel</a></li>
<li><a class="reference internal" href="#validate-the-metamodel">Validate the metamodel</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../kriging_metamodel/plot_draw_covariance_models.html"
                          title="previous chapter">Kriging : draw covariance models</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../fields_metamodels/plot_karhunenloeve_validation.html"
                          title="next chapter">Validation of a Karhunen-Loeve decomposition</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/auto_meta_modeling/low_rank_tensors_metamodel/plot_tensor_cantilever_beam.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-meta-modeling-low-rank-tensors-metamodel-plot-tensor-cantilever-beam-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="tensor-approximation-of-the-cantilever-beam-model">
<span id="sphx-glr-auto-meta-modeling-low-rank-tensors-metamodel-plot-tensor-cantilever-beam-py"></span><h1>Tensor approximation of the cantilever beam model<a class="headerlink" href="#tensor-approximation-of-the-cantilever-beam-model" title="Permalink to this headline">¶</a></h1>
<p>In this example, we create a low-rank approximation in the canonical tensor format of the cantilever beam.</p>
<p>In order to fit the hyper-parameters of the approximation, we use a design of experiments which size is 10000.</p>
<p>We consider a cantilever beam defined by its Young’s modulus <img class="math" src="../../_images/math/7b093bea7d8744f39f2a40eafb4574ed61b97fc5.svg" alt="E"/>, its length <img class="math" src="../../_images/math/674f685d44e204d0c5abdc6b85851af89ec6deda.svg" alt="L"/> and its section modulus <img class="math" src="../../_images/math/ef3d6592baea05f79a282952fb7e90fba4ba5869.svg" alt="I"/>. One end of the cantilever beam is built in a wall and we apply a concentrated bending load <img class="math" src="../../_images/math/604ed945c1dae899de5d6c15a426473a3f97c1a2.svg" alt="F"/> at the other end of the beam, resulting in a deviation <img class="math" src="../../_images/math/d58d4863379b3eb734fd9d329f850fe196c3abc5.svg" alt="Y"/>.</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/beam.png"><img alt="../../_images/beam.png" src="../../_images/beam.png" style="width: 25%;" /></a>
<p class="caption"><span class="caption-text">The beam geometry</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Inputs</strong></p>
<ul class="simple">
<li><p><img class="math" src="../../_images/math/7b093bea7d8744f39f2a40eafb4574ed61b97fc5.svg" alt="E"/> : Young modulus (Pa), Beta(r = 0.9, t = 3.5, a = <img class="math" src="../../_images/math/6af5f4c051f9455b170387e65faed8b2c5003aa7.svg" alt="2.5\times 10^7"/>, <img class="math" src="../../_images/math/7b4f02c7683c880f1ff983c36d38e4f1fc17104c.svg" alt="b = 5\times 10^7"/>)</p></li>
<li><p><img class="math" src="../../_images/math/604ed945c1dae899de5d6c15a426473a3f97c1a2.svg" alt="F"/> : Loading (N), Lognormal(<img class="math" src="../../_images/math/f94298cc6f21d6e46d6b8b14e8e5176ea7884345.svg" alt="\mu_F=30 \times 10^3"/>, <img class="math" src="../../_images/math/b32787dcd2c368bbe638d39e2e7fefb05d65c959.svg" alt="\sigma_F=9\times 10^3"/>, shift= <img class="math" src="../../_images/math/e3f4548f0c90a184aeac70862dd81658fadcefc1.svg" alt="15 \times 10^3"/>)</p></li>
<li><p><img class="math" src="../../_images/math/674f685d44e204d0c5abdc6b85851af89ec6deda.svg" alt="L"/> : Length of beam (cm), Uniform(min=250.0, max= 260.0)</p></li>
<li><p><img class="math" src="../../_images/math/ef3d6592baea05f79a282952fb7e90fba4ba5869.svg" alt="I"/> : Moment of inertia (cm^4), Beta(r = 2.5, t = 4.0, a = 310, b = 450).</p></li>
</ul>
<p>In the previous table <img class="math" src="../../_images/math/ce8dbe235c4215373abbb99bcb99c11a7a733aa8.svg" alt="\mu_F=E(F)"/> and <img class="math" src="../../_images/math/06e8c1d01caacba7033dbad7683b337649b3c721.svg" alt="\sigma_F=\sqrt{V(F)}"/> are the mean and the standard deviation of <img class="math" src="../../_images/math/604ed945c1dae899de5d6c15a426473a3f97c1a2.svg" alt="F"/>.</p>
<p>We assume that the random variables E, F, L and I are dependent and associated with a gaussian copula which correlation matrix is :</p>
<div class="math">
<p><img src="../../_images/math/c61849bfdfc43a364da05b6525d4e4dc096151ef.svg" alt="R = \begin{pmatrix}
      1 &amp; 0 &amp; 0 &amp; 0 \\
      0 &amp; 1 &amp; 0 &amp; 0 \\
      0 &amp; 0 &amp; 1 &amp; -0.2 \\
      0 &amp; 0 &amp; -0.2 &amp; 1
    \end{pmatrix}"/></p>
</div><p>In other words, we consider that the variables L and I are negatively correlated : when the length L increases, the moment of intertia I decreases.</p>
<p><strong>Output</strong></p>
<p>The vertical displacement at free end of the cantilever beam is:</p>
<div class="math">
<p><img src="../../_images/math/b8a99a30732bcb589b596e363e81858b68bb1580.svg" alt="Y  = \dfrac{F\, L^3}{3 \, E \, I}"/></p>
</div><div class="section" id="definition-of-the-model">
<h2>Definition of the model<a class="headerlink" href="#definition-of-the-model" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">openturns.viewer</span> <span class="k">as</span> <span class="nn">viewer</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pylab</span> <span class="k">as</span> <span class="n">plt</span>
<span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">NONE</span><span class="p">)</span>
</pre></div>
</div>
<p>We define the symbolic function which evaluates the output Y depending on the inputs E, F, L and I.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SymbolicFunction</span><span class="p">([</span><span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;F*L^3/(3*E*I)&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Then we define the distribution of the input random vector.</p>
<p>Young’s modulus E</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">E</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Beta</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">2.5e7</span><span class="p">,</span> <span class="mf">5.0e7</span><span class="p">)</span>  <span class="c1"># in N/m^2</span>
<span class="n">E</span><span class="o">.</span><span class="n">setDescription</span><span class="p">(</span><span class="s2">&quot;E&quot;</span><span class="p">)</span>
<span class="c1"># Load F</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LogNormal</span><span class="p">()</span>  <span class="c1"># in N</span>
<span class="n">F</span><span class="o">.</span><span class="n">setParameter</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">LogNormalMuSigma</span><span class="p">()([</span><span class="mf">30.e3</span><span class="p">,</span> <span class="mf">9e3</span><span class="p">,</span> <span class="mf">15.e3</span><span class="p">]))</span>
<span class="n">F</span><span class="o">.</span><span class="n">setDescription</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span>
<span class="c1"># Length L</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Uniform</span><span class="p">(</span><span class="mf">250.</span><span class="p">,</span> <span class="mf">260.</span><span class="p">)</span>  <span class="c1"># in cm</span>
<span class="n">L</span><span class="o">.</span><span class="n">setDescription</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">)</span>
<span class="c1"># Moment of inertia I</span>
<span class="n">I</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Beta</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">310</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>  <span class="c1"># in cm^4</span>
<span class="n">I</span><span class="o">.</span><span class="n">setDescription</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, we define the dependency using a <cite>NormalCopula</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myDistribution</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">ComposedDistribution</span><span class="p">([</span><span class="n">E</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">I</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="create-the-design-of-experiments">
<h2>Create the design of experiments<a class="headerlink" href="#create-the-design-of-experiments" title="Permalink to this headline">¶</a></h2>
<p>We consider a simple Monte-Carlo sampling as a design of experiments. This is why we generate an input sample using the <cite>getSample</cite> method of the distribution. Then we evaluate the output using the <cite>model</cite> function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sampleSize_train</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">X_train</span> <span class="o">=</span> <span class="n">myDistribution</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">sampleSize_train</span><span class="p">)</span>
<span class="n">Y_train</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
</pre></div>
</div>
<p>The following figure presents the distribution of the vertical deviations Y on the training sample. We observe that the large deviations occur less often.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">histo</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">HistogramFactory</span><span class="p">()</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">Y_train</span><span class="p">)</span><span class="o">.</span><span class="n">drawPDF</span><span class="p">()</span>
<span class="n">histo</span><span class="o">.</span><span class="n">setXTitle</span><span class="p">(</span><span class="s2">&quot;Vertical deviation (cm)&quot;</span><span class="p">)</span>
<span class="n">histo</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Distribution of the vertical deviation&quot;</span><span class="p">)</span>
<span class="n">histo</span><span class="o">.</span><span class="n">setLegends</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">histo</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_tensor_cantilever_beam_001.png" srcset="../../_images/sphx_glr_plot_tensor_cantilever_beam_001.png" alt="Distribution of the vertical deviation" class = "sphx-glr-single-img"/></div>
<div class="section" id="create-the-metamodel">
<h2>Create the metamodel<a class="headerlink" href="#create-the-metamodel" title="Permalink to this headline">¶</a></h2>
<p>We recall that the metamodel writes as:</p>
<div class="math">
<p><img src="../../_images/math/15e5e6decc2ba5f5282a8b9eef7241afb6d6aba3.svg" alt="f(X_1, \dots, X_d) = \sum_{i=1}^m \prod_{j=1}^d v_j^{(i)} (x_j), \forall x \in \mathbb{R}^d"/></p>
</div><p>with:</p>
<div class="math">
<p><img src="../../_images/math/151446aeda68ab58fcc504c8bdaa7fb05e286011.svg" alt="v_j^{(i)} (x_j) = \sum_{k=1}^{n_j} \beta_{j,k}^{(i)} \phi_{j,k} (x_j)"/></p>
</div><p>We should define :</p>
<blockquote>
<div><ul class="simple">
<li><p>The family of univariate functions <img class="math" src="../../_images/math/c433280ac03e09ccd55c3f3be209432a59d706b6.svg" alt="\phi_j"/>. We choose the orthogonal basis with respect to the marginal distribution measures.</p></li>
<li><p>The maximal rank <img class="math" src="../../_images/math/2f6d6292800bff652850ddd85bc4d6c2e83fa513.svg" alt="m"/>. Here value is set to 5</p></li>
<li><p>The marginal degrees <img class="math" src="../../_images/math/ea318b26e5b0d27bd03ec81c17c3e18eedd93ce8.svg" alt="n_j"/>. Here we set the degrees to [4, 15, 3, 2]</p></li>
</ul>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">factoryCollection</span> <span class="o">=</span> <span class="p">[</span><span class="n">ot</span><span class="o">.</span><span class="n">OrthogonalUniVariatePolynomialFunctionFactory</span><span class="p">(</span>
    <span class="n">ot</span><span class="o">.</span><span class="n">StandardDistributionPolynomialFactory</span><span class="p">(</span><span class="n">_</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="p">[</span><span class="n">E</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">I</span><span class="p">]]</span>
<span class="n">functionFactory</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">OrthogonalProductFunctionFactory</span><span class="p">(</span><span class="n">factoryCollection</span><span class="p">)</span>
<span class="n">nk</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">maxRank</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Finally we might launch the algorithm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">algo</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TensorApproximationAlgorithm</span><span class="p">(</span>
    <span class="n">X_train</span><span class="p">,</span> <span class="n">Y_train</span><span class="p">,</span> <span class="n">myDistribution</span><span class="p">,</span> <span class="n">functionFactory</span><span class="p">,</span> <span class="n">nk</span><span class="p">,</span> <span class="n">maxRank</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
<span class="n">metamodel</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">getMetaModel</span><span class="p">()</span>
</pre></div>
</div>
<p>The <cite>run</cite> method has optimized the hyperparameters of the metamodel (<img class="math" src="../../_images/math/233b263354a1b8b4463fe36dd42563b01bed21f3.svg" alt="\beta"/> coefficients).</p>
<p>We can then print the coefficients which have been estimated using a double loop.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tensor</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">getTensor</span><span class="p">()</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">myDistribution</span><span class="o">.</span><span class="n">getDimension</span><span class="p">()):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;j =&quot;</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">maxRank</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nk</span><span class="p">[</span><span class="n">j</span><span class="p">]):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">tensor</span><span class="o">.</span><span class="n">getCoefficients</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)[</span><span class="n">k</span><span class="p">])</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>j = 0
722978894763.0879
-92472135748.45401
14102006704.869831
-2251795745.5194407
j = 1
6.151045701074995e-07
4.570634307488695e-05
0.0014193467595821612
0.020471561588707807
0.13686087599303254
0.41052889266254844
0.6035367755553036
0.5410446292536881
0.34889621690989847
0.17092195867982998
0.06373150117108918
0.017649187091628014
0.0034400009010138732
0.0004227931554202656
2.4726907431702767e-05
j = 2
0.9994201070652384
0.034048618403352375
0.00037573731554928593
j = 3
0.9977346671062337
-0.06727208971343898
</pre></div>
</div>
</div>
<div class="section" id="validate-the-metamodel">
<h2>Validate the metamodel<a class="headerlink" href="#validate-the-metamodel" title="Permalink to this headline">¶</a></h2>
<p>We finally want to validate the kriging metamodel. This is why we generate a validation sample which size is equal to 100 and we evaluate the output of the model on this sample.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sampleSize_test</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">myDistribution</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">sampleSize_test</span><span class="p">)</span>
<span class="n">Y_test</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>MetaModelValidation</cite> classe makes the validation easy. To create it, we use the validation samples and the metamodel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">val</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MetaModelValidation</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">Y_test</span><span class="p">,</span> <span class="n">metamodel</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>computePredictivityFactor</cite> computes the Q2 factor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Q2</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">computePredictivityFactor</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Q2</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>0.9997018971920929
</pre></div>
</div>
<p>Since the Q2 is larger than 95%, we can say that the quality is acceptable.</p>
<p>The residuals are the difference between the model and the metamodel.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">getResidualSample</span><span class="p">()</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">HistogramFactory</span><span class="p">()</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">.</span><span class="n">drawPDF</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_tensor_cantilever_beam_002.png" srcset="../../_images/sphx_glr_plot_tensor_cantilever_beam_002.png" alt="y0 PDF" class = "sphx-glr-single-img"/><p>We observe that the negative residuals occur with nearly the same frequency of the positive residuals: this is a first   sign of good quality. Furthermore, the residuals are most of the times contained in the [-1,1] interval, which is a sign of quality given the amplitude of the output (approximately from 5 to 25 cm).</p>
<p>The <cite>drawValidation</cite> method allows to compare the observed outputs and the metamodel outputs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">drawValidation</span><span class="p">()</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Q2 = </span><span class="si">%.2f%%</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">Q2</span><span class="p">))</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_tensor_cantilever_beam_003.png" srcset="../../_images/sphx_glr_plot_tensor_cantilever_beam_003.png" alt="Q2 = 99.97%" class = "sphx-glr-single-img"/><p>We observe that the metamodel predictions are close to the model outputs, since most red points are close to the diagonal. However, when we consider extreme deviations (i.e. less than 10 or larger than 20), then the quality is less obvious.</p>
<p>Given that the kriging metamodel quality is sensitive to the design of experiments, it might be interesting to consider a Latin Hypercube Sampling (LHS) design to further improve the predictions quality.</p>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.676 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-meta-modeling-low-rank-tensors-metamodel-plot-tensor-cantilever-beam-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/9f7e6cb408e18f7997c602f551e4ff54/plot_tensor_cantilever_beam.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_tensor_cantilever_beam.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/8208e2d03ce459da4d3715b1bbc04895/plot_tensor_cantilever_beam.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_tensor_cantilever_beam.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../fields_metamodels/plot_karhunenloeve_validation.html" title="Validation of a Karhunen-Loeve decomposition"
             >next</a> |</li>
        <li class="right" >
          <a href="../kriging_metamodel/plot_draw_covariance_models.html" title="Kriging : draw covariance models"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.19dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Meta modeling</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tensor approximation of the cantilever beam model</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2021 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Dec 31, 2021.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>