
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Defining Python and symbolic functions: a quick start introduction to functions &#8212; OpenTURNS 1.22dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/openturns.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/mysearchtools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Create multivariate functions" href="plot_createMultivariateFunction.html" />
    <link rel="prev" title="Increase the input dimension of a function" href="plot_functions_inputDim.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://openturns.discourse.group/">Forum</a></li>
    <li><a href="https://gitter.im/openturns/community">Chat</a></li>
    <li><a href="https://github.com/openturns/openturns/wiki/Modules">Modules</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plot_createMultivariateFunction.html" title="Create multivariate functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_functions_inputDim.html" title="Increase the input dimension of a function"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.22dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Functional modeling</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" accesskey="U">Vectorial functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Defining Python and symbolic functions: a quick start introduction to functions</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Defining Python and symbolic functions: a quick start introduction to functions</a><ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#the-python-function">The Python function</a></li>
<li><a class="reference internal" href="#what-types-for-x-and-for-y">What types for x and for y ?</a></li>
<li><a class="reference internal" href="#the-vectorized-python-function">The vectorized Python function</a></li>
<li><a class="reference internal" href="#how-to-manage-the-history">How to manage the history</a></li>
<li><a class="reference internal" href="#symbolic-functions">Symbolic functions</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="plot_functions_inputDim.html"
                          title="previous chapter">Increase the input dimension of a function</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="plot_createMultivariateFunction.html"
                          title="next chapter">Create multivariate functions</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/auto_functional_modeling/vectorial_functions/plot_quick_start_functions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-functional-modeling-vectorial-functions-plot-quick-start-functions-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="defining-python-and-symbolic-functions-a-quick-start-introduction-to-functions">
<span id="sphx-glr-auto-functional-modeling-vectorial-functions-plot-quick-start-functions-py"></span><h1>Defining Python and symbolic functions: a quick start introduction to functions<a class="headerlink" href="#defining-python-and-symbolic-functions-a-quick-start-introduction-to-functions" title="Permalink to this heading">¶</a></h1>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this heading">¶</a></h2>
<p>In this example, we show how to define Python and symbolic functions.
Such functions can be evaluated by the library and used, for example, to propagate uncertainties. We focus on functions which have a vector input and a vector output.</p>
</section>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>We consider the following example:</p>
<ul class="simple">
<li><p>three input variables,</p></li>
<li><p>two outputs.</p></li>
</ul>
<p>Moreover, we assume that the input distribution has independent Gaussian marginals.</p>
<p>The function is defined by the equations:</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJcAAAAQBAMAAADpBPAqAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAMr/73WDPi3RIGJ2v8+l0lYufAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABU0lEQVQ4y2MQ+qzAwKDvyoAKuA5/W8DxOYtk0XwgLmdAB9wfGbgcSBeNb2DgbMBQwPWHgQfBW0CsKLMDw2oGTJDMcADBKSVWlOcXsgI4mN+9AIs2QqKc33kWYDGM15ABizaCovcKYSy1NCDIgbCZPmLTRlD0fAADVwuGyyI+AYkVDmjawKLth7CJtjaBPHiWgYGjD90szoZkINnxAGRvWtq7tLQDcFHGDWwHMEUZDNg2AMlHQCyHbpg4w/wCoL4HqG4Ai3I+YHfAFGUQ4JsAZP+AG4YIM64DDHwPMAyDijLwHMAiyrgbyGb9hcVlYgwM7D8xDIOKMqxdgEWUK2gBA9fZPxMwDJvyeQLDvL8b0AyDiTJkYhVlgmU0OQasAD3MoHlxggCmKIcD+wUoUxaHYVD5VSiioQwbMEVZNzBBMxLr4UKshsWYC2Cx4f9/bPmvvIYBAIFthJErTVdbAAAACnRFWHREZXB0aAD////8YJGQVQAAAABJRU5ErkJggg==" alt="Y_1 = X_1 + X_2 + X_3"/></p>
</div><p>and</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAAAQBAMAAADDtAGFAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAMr/73WDPi3RIGJ2v8+l0lYufAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABhUlEQVQ4y22TsUvDQBTGv0SaJmksxUEHUfsftC6Ckxl0tgiCm0JBsAi2IHQpWERxEGwGByebwc2KWdXBYFeLgpuCFP8ApRZsLZV6KZeW3N2D3P149/Hl3b07jDXjQGIJwagsZFCas5msXv2x1WaGQeyQLw827mO44JKINKCbHK4XoRU57bULl3fQuzB4HDFxyWuVpAFBpIe+QzQ6or9p7VuRQ/nY5lFrGbZA+xITOYzOivA9R0He9IIWlBA6yA0RPqWgFuKMNFQiGf2AdVj7JsPRwwAP9736a8AkthnpmZIE1JO+2aIX2f6Oi2lAchSXIpKKQ8YP4By7QQMpq7XINM34TqCchVYPmxQRi1ok3fbWHoPnUAE+eQfdRbTutc/1Ubrziux4a6/BEjaAPYtzGAfCv2S+sn3UV2zotS6RKlbgMizPQ/t6Yx1OmxbO/8jGt4Yo05uNG0nUO+4c6JOw/E6rZviZ9i4VEWqnhNlVOH7PHZlen5leVyQNVXOCrNTrDZ5BvoB/dGVx3ugUrqoAAAAKdEVYdERlcHRoAP////xgkZBVAAAAAElFTkSuQmCC" alt="Y_2 = X_1 - X_2 X_3"/></p>
</div><p>for any <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHYAAAARBAMAAAD6eEXAAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAGK/7z3SdMt1I879gi+loGlKnAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABYElEQVQoz2NgYFT+IsD62ZEBCvBzIYD3ndeLFQEgFtt3BsYGhAR+LgQIsTAURYON/sTAhCSOnwvXy8JWAGI5MyggS+DhMt7uaIXp5bwAYs0PE0BWjId74yDCXtYDIBaXOYqDcHN5FRBurj4CZnF/R1GMmysB9y+Hh10CmHX0N5AQhQcmmBurjcKNiQY5/CwirKpFwAzOAGcgGfoAKg7msiewKCBxGQxYQNbkdXTAwoppGjh+axnmA4OMHaYXzOV8wNuAxGUo4JsAZB9DiiOHRlC4KzDwPUDohXIZmBSQuexpIA4Hkt7YEiANxLw/wXrZHRFcBikBZC7jaZB/WTfA9HIzsIgmMMz4PIFh3q8EkF5OWwY4l8ETlcvdgBS/rO92ebJ3G8HDH+RmVqRkPKEAicvawLsAOV2hAfYFKHrPMCQgcXkSuBUYcINDtgUMAQiT/v9XQOIy3L3EQAAE4OViAACjtmy7unLgNQAAAAp0RVh0RGVwdGgAAAAABCBOJRUAAAAASUVORK5CYII=" alt="X_1,X_2,X_3 \in \mathbb{R}" style="vertical-align: -4px"/>.</p>
<p>The exact expectation and standard deviation of the output random variable are presented in the following table.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Expectation</p></th>
<th class="head"><p>Standard deviation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAMr/73WDPi3RIGJ2v8+l0lYufAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAYklEQVQI12MQ+qzAwKDvysDAkA/E5UDMEN/AwNkAYjA7MKwG0Qw8vxgOgBmc33kWgBkM9wohNMP5AAauFhDjLAMDRx+I8QiI5UCMH1AG6y8Ig+vsnwlQKQYGJIYslGY9XAgAC4sTzwkxRfQAAAAKdEVYdERlcHRoAAAAAAO+KrC2AAAAAElFTkSuQmCC" alt="Y_1" style="vertical-align: -3px"/></p></td>
<td><p>0</p></td>
<td><p>1.732</p></td>
</tr>
<tr class="row-odd"><td><p><img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAMr/73WDPi3RIGJ2v8+l0lYufAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAc0lEQVQI12MQ+qzAwKDvysDAkA/E5UDMEN/AwNkAYjA7MKwG0Qw8vxgOgBmc33kWgBkM9wohNMP5AAaOGqAZDGcZGKQZcoCMRwwM8xhKgIwfIPkzDAysv4A01y0GrrN/JjAwsE2A6tzJCKFZA7ghDPn/fwCcOhh2+DfuawAAAAp0RVh0RGVwdGgAAAAAA74qsLYAAAAASUVORK5CYII=" alt="Y_2" style="vertical-align: -3px"/></p></td>
<td><p>0</p></td>
<td><p>1.415</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>

<span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">NONE</span><span class="p">)</span>
</pre></div>
</div>
<p>We first define the input random vector of the function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">X0</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">X1</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">X2</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">inputDistribution</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">ComposedDistribution</span><span class="p">((</span><span class="n">X0</span><span class="p">,</span> <span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">))</span>
<span class="n">inputRandomVector</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">RandomVector</span><span class="p">(</span><span class="n">inputDistribution</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-python-function">
<h2>The Python function<a class="headerlink" href="#the-python-function" title="Permalink to this heading">¶</a></h2>
<p>Based on a Python function defined with the <cite>def</cite> keyword, the <cite>PythonFunction</cite> class creates a function.</p>
<p>The simplest constructor of the <cite>PythonFunction</cite> class is:</p>
<p><cite>PythonFunction ( nbInputs , nbOutputs , myPythonFunc )</cite></p>
<p>where</p>
<ul class="simple">
<li><p><cite>nbInputs</cite>: the number of inputs,</p></li>
<li><p><cite>nbOutputs</cite>: the number of outputs,</p></li>
<li><p><cite>myPythonFunc</cite>: a Python function.</p></li>
</ul>
<p>The goal of the <cite>PythonFunction</cite> class are:</p>
<ul class="simple">
<li><p>to easily create a function in Python,</p></li>
<li><p>use all the power of the Python libraries in order to evaluate the function.</p></li>
</ul>
<p>The function <cite>mySimulator</cite> has the calling sequence <cite>y=mySimulator(x)</cite> where:</p>
<ul class="simple">
<li><p><cite>x</cite>: the input of the function, a vector with <cite>nbInputs</cite> dimensions,</p></li>
<li><p><cite>y</cite>: the output of the function, a vector with <cite>nbOutputs</cite> dimensions.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mySimulator</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">y0</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">y</span>
</pre></div>
</div>
<p>We now define the <cite>PythonFunction</cite> object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">PythonFunction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mySimulator</span><span class="p">)</span>
</pre></div>
</div>
<p>This function can be evaluated using parentheses. It produces the same outputs as the <cite>mySimulator</cite> function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">])</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<p>[6,-5]</p>
</div>
<br />
<br /><p>However, the newly created <cite>myfunction</cite> has services that the basic Python function did not have.
For example, we can create a <cite>CompositeRandomVector</cite> on top of it, by associating it to the input random vector.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputVect</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">CompositeRandomVector</span><span class="p">(</span><span class="n">myfunction</span><span class="p">,</span> <span class="n">inputRandomVector</span><span class="p">)</span>
</pre></div>
</div>
<p>In the following example, we estimate the output mean based on a simple Monte-Carlo experiment using 10000 function evaluations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">montecarlosize</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">outputSample</span> <span class="o">=</span> <span class="n">outputVect</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">montecarlosize</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">empiricalMean</span> <span class="o">=</span> <span class="n">outputSample</span><span class="o">.</span><span class="n">computeMean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">empiricalMean</span><span class="p">)</span>
<span class="n">empiricalSd</span> <span class="o">=</span> <span class="n">outputSample</span><span class="o">.</span><span class="n">computeStandardDeviation</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">empiricalSd</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[-0.00555473,0.00220407]
[1.72426,1.40274]
</pre></div>
</div>
</section>
<section id="what-types-for-x-and-for-y">
<h2>What types for x and for y ?<a class="headerlink" href="#what-types-for-x-and-for-y" title="Permalink to this heading">¶</a></h2>
<p>Not all types are possible for the inputs and outputs of the <cite>mySimulator</cite> function.
The following table present some of the available types.
All in all, any type which can be converted to or from a “vector” can be managed by the <cite>PythonFunction</cite> class.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Input X</p></th>
<th class="head"><p>Output Y</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>list</cite> (Python)</p></td>
<td><p>NO</p></td>
<td><p>YES</p></td>
</tr>
<tr class="row-odd"><td><p><cite>tuple</cite> (Python)</p></td>
<td><p>NO</p></td>
<td><p>YES</p></td>
</tr>
<tr class="row-even"><td><p><cite>array</cite> (NumPy)</p></td>
<td><p>NO</p></td>
<td><p>YES</p></td>
</tr>
<tr class="row-odd"><td><p><cite>Point</cite> (OpenTURNS)</p></td>
<td><p>YES</p></td>
<td><p>YES</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="the-vectorized-python-function">
<h2>The vectorized Python function<a class="headerlink" href="#the-vectorized-python-function" title="Permalink to this heading">¶</a></h2>
<p>The <cite>PythonFunction</cite> class has a <cite>func_sample</cite> option which vectorizes the
computation so that all the output values in the sample are computed from a
single function call, without any <cite>for</cite> loop.
To make this possible, the input and output is then a <cite>Sample</cite> instead of a <cite>Point</cite>.
This often boosts performance (but not always).</p>
<p>The calling sequence of a vectorized Python function is:</p>
<dl class="simple">
<dt>def mySimulator (x):</dt><dd><p>[…]
return y</p>
</dd>
</dl>
<p>myfunction = PythonFunction(nbInputs, nbOutputs, func_sample = mySimulator)</p>
<p>where</p>
<ul class="simple">
<li><p>x: the input of the function, a <cite>Sample</cite> with size <cite>nbExperiments</cite> (<cite>getSize</cite>) and dimension <cite>nbInputs</cite> (<cite>getDimension</cite>),</p></li>
<li><p>y: the output of the function</p>
<ul>
<li><p>a numpy <cite>array</cite> with <cite>nbExperiments</cite> rows and <cite>nbOutputs</cite> columns</p></li>
<li><p>or a <cite>Sample</cite> with size <cite>nbExperiments</cite> and dimension <cite>nbOutputs</cite></p></li>
</ul>
</li>
</ul>
<p>In the following, we present an vectorization example based on the <cite>numpy</cite> module.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mySimulatorVect</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># Convert NumericalSample &gt; Array Numpy</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">x0</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># Extract column 0</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="n">y0</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">-</span> <span class="n">x1</span> <span class="o">*</span> <span class="n">x2</span>
    <span class="c1"># Stack the two rows</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">y</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfunctionVect</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">PythonFunction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">func_sample</span><span class="o">=</span><span class="n">mySimulatorVect</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputVect</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">CompositeRandomVector</span><span class="p">(</span><span class="n">myfunctionVect</span><span class="p">,</span> <span class="n">inputRandomVector</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">montecarlosize</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">outputSample</span> <span class="o">=</span> <span class="n">outputVect</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">montecarlosize</span><span class="p">)</span>

<span class="n">empiricalMean</span> <span class="o">=</span> <span class="n">outputSample</span><span class="o">.</span><span class="n">computeMean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">empiricalMean</span><span class="p">)</span>
<span class="n">empiricalSd</span> <span class="o">=</span> <span class="n">outputSample</span><span class="o">.</span><span class="n">computeStandardDeviation</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">empiricalSd</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[-0.00134596,-0.00382747]
[1.75145,1.42678]
</pre></div>
</div>
</section>
<section id="how-to-manage-the-history">
<h2>How to manage the history<a class="headerlink" href="#how-to-manage-the-history" title="Permalink to this heading">¶</a></h2>
<p>The <cite>MemoizeFunction</cite> class defines a history system to store the calls to the function.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Methods</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>enableHistory()</cite></p></td>
<td><p>enables the history (it is enabled by default)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>disableHistory()</cite></p></td>
<td><p>disables the history</p></td>
</tr>
<tr class="row-even"><td><p><cite>clearHistory()</cite></p></td>
<td><p>deletes the content of the history</p></td>
</tr>
<tr class="row-odd"><td><p><cite>getHistoryInput()</cite></p></td>
<td><p>a <cite>Sample</cite>, the history of inputs X</p></td>
</tr>
<tr class="row-even"><td><p><cite>getHistoryOutput()</cite></p></td>
<td><p>a <cite>Sample</cite>, the history of outputs Y</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">PythonFunction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mySimulator</span><span class="p">)</span>
<span class="n">myfunction</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MemoizeFunction</span><span class="p">(</span><span class="n">myfunction</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputVariableOfInterest</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">CompositeRandomVector</span><span class="p">(</span><span class="n">myfunction</span><span class="p">,</span> <span class="n">inputRandomVector</span><span class="p">)</span>
<span class="n">montecarlosize</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">outputSample</span> <span class="o">=</span> <span class="n">outputVariableOfInterest</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">montecarlosize</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the history of input points.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="n">myfunction</span><span class="o">.</span><span class="n">getInputHistory</span><span class="p">()</span>
<span class="n">inputs</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table>
  <tr><td></td><th>v0</th><th>v1</th><th>v2</th></tr>
  <tr><th>0</th><td>-0.2663513</td><td>-0.2534594</td><td>1.011153</td></tr>
  <tr><th>1</th><td>1.283139</td><td>-0.5533954</td><td>-0.8628305</td></tr>
  <tr><th>2</th><td>1.714011</td><td>0.8829328</td><td>0.05928211</td></tr>
  <tr><th>3</th><td>0.02775571</td><td>1.239406</td><td>-3.246511</td></tr>
  <tr><th>4</th><td>0.2525268</td><td>1.72599</td><td>-0.09525381</td></tr>
  <tr><th>5</th><td>-0.3497864</td><td>-0.9771853</td><td>-0.6350077</td></tr>
  <tr><th>6</th><td>-0.7103832</td><td>-0.9961178</td><td>0.8213179</td></tr>
  <tr><th>7</th><td>-0.6293938</td><td>0.7427186</td><td>-0.1490467</td></tr>
  <tr><th>8</th><td>-0.876391</td><td>-0.06694214</td><td>-0.2582989</td></tr>
  <tr><th>9</th><td>-0.7666912</td><td>1.417515</td><td>0.564389</td></tr>
</table>
</div>
<br />
<br /></section>
<section id="symbolic-functions">
<h2>Symbolic functions<a class="headerlink" href="#symbolic-functions" title="Permalink to this heading">¶</a></h2>
<p>The <cite>SymbolicFunction</cite> class can create symbolic functions whenever the function is simple enough to be expressed as a string.</p>
<p>This has at least two significant advantages.</p>
<ul class="simple">
<li><p>It generally improves the performance.</p></li>
<li><p>This allows one to automatically evaluate the exact gradient and Hessian matrix.</p></li>
</ul>
<p>In practice, some functions cannot be expressed as a symbolic function: in this case, the Python function cannot be avoided.</p>
<p>The calling sequence is the following:</p>
<p>`
myfunction = SymbolicFunction( list_of_inputs, list_of_formulas)
`</p>
<p>where</p>
<ul class="simple">
<li><p>list_of_inputs: a <cite>list</cite> of <cite>nbInputs</cite> strings, the names of the input variables,</p></li>
<li><p>list_of_formulas: a <cite>list</cite> of <cite>nbOutputs</cite> strings, the equations.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SymbolicFunction</span><span class="p">((</span><span class="s2">&quot;x0&quot;</span><span class="p">,</span> <span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;x2&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;x0 + x1 + x2&quot;</span><span class="p">,</span> <span class="s2">&quot;x0 - x1 * x2&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>A <cite>SymbolicFunction</cite>, like any other function, can also have a history.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfunction</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MemoizeFunction</span><span class="p">(</span><span class="n">myfunction</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputVect</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">CompositeRandomVector</span><span class="p">(</span><span class="n">myfunction</span><span class="p">,</span> <span class="n">inputRandomVector</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">montecarlosize</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">outputSample</span> <span class="o">=</span> <span class="n">outputVect</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">montecarlosize</span><span class="p">)</span>
<span class="n">empiricalMean</span> <span class="o">=</span> <span class="n">outputSample</span><span class="o">.</span><span class="n">computeMean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">empiricalMean</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[0.0341618,0.017369]
</pre></div>
</div>
<p>Since the history is enabled, we can get the history of outputs of the function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputs</span> <span class="o">=</span> <span class="n">myfunction</span><span class="o">.</span><span class="n">getOutputHistory</span><span class="p">()</span>
<span class="n">outputs</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="p">:]</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table>
  <tr><td></td><th>v0</th><th>v1</th></tr>
  <tr><th>0</th><td>0.5508862</td><td>1.654515</td></tr>
  <tr><th>1</th><td>-1.365358</td><td>-1.980954</td></tr>
  <tr><th>2</th><td>-1.732063</td><td>-0.8032709</td></tr>
  <tr><th>3</th><td>0.4673812</td><td>0.7841379</td></tr>
  <tr><th>4</th><td>-2.50926</td><td>-1.470317</td></tr>
  <tr><th>5</th><td>-0.1433779</td><td>-0.8622018</td></tr>
  <tr><th>6</th><td>2.452678</td><td>-1.221384</td></tr>
  <tr><th>7</th><td>-0.727263</td><td>4.544523</td></tr>
  <tr><th>8</th><td>2.727623</td><td>3.208275</td></tr>
</table>
</div>
<br />
<br /><div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-functional-modeling-vectorial-functions-plot-quick-start-functions-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/ab56d37ddf7a86e0eac9be6b2c3afc93/plot_quick_start_functions.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_quick_start_functions.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/45ce34475983d714e1b3837861a34c15/plot_quick_start_functions.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_quick_start_functions.ipynb</span></code></a></p>
</div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plot_createMultivariateFunction.html" title="Create multivariate functions"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_functions_inputDim.html" title="Increase the input dimension of a function"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.22dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Functional modeling</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" >Vectorial functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Defining Python and symbolic functions: a quick start introduction to functions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2022 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Jan 01, 2022.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>