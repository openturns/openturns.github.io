
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Save/load a study &#8212; OpenTURNS 1.21dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/openturns.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/mysearchtools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Iterated Functions System" href="plot_ifs.html" />
    <link rel="prev" title="Estimate an integral" href="plot_estimate_integral_iterated_quadrature.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://openturns.discourse.group/">Forum</a></li>
    <li><a href="https://gitter.im/openturns/community">Chat</a></li>
    <li><a href="https://github.com/openturns/openturns/wiki/Modules">Modules</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plot_ifs.html" title="Iterated Functions System"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_estimate_integral_iterated_quadrature.html" title="Estimate an integral"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.21dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Numerical methods</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" accesskey="U">General methods</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Save/load a study</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="plot_estimate_integral_iterated_quadrature.html"
                          title="previous chapter">Estimate an integral</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="plot_ifs.html"
                          title="next chapter">Iterated Functions System</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/auto_numerical_methods/general_methods/plot_study_save_load.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-numerical-methods-general-methods-plot-study-save-load-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="save-load-a-study">
<span id="sphx-glr-auto-numerical-methods-general-methods-plot-study-save-load-py"></span><h1>Save/load a study<a class="headerlink" href="#save-load-a-study" title="Permalink to this heading">¶</a></h1>
<p>The objective of this example is to demonstrate how to save the structures created within a script session to disk in order to be able to load them in a future session.</p>
<p>There are several possible ways to achieve this:</p>
<ul class="simple">
<li><p>with the standard pickle module</p></li>
<li><p>with openturns’s Study</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">NONE</span><span class="p">)</span>
</pre></div>
</div>
<p>create objects to save</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">distribution</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span>
<span class="n">function</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SymbolicFunction</span><span class="p">([</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;x2&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;x1 + x2&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>With the pickle module</strong></p>
<p>The objects are retrieved in the same order they are stored.</p>
<p>save objects</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;study.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">distribution</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>load saved objects</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;study.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">loaded_distribution</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">loaded_function</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">loaded_distribution</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">loaded_function</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;Normal(mu = 4, sigma = 3)&#39;, &#39;[x1,x2]-&gt;[x1 + x2]&#39;)
</pre></div>
</div>
<p><strong>With OpenTURNS’ Study</strong></p>
<p>In order to be able to manipulate the objects contained in a Study, it is necessary to:</p>
<ul class="simple">
<li><p>create the same empty structure in the new study,</p></li>
<li><p>fill this new empty structure with the content of the loaded structure, identified with its name or its id.</p></li>
</ul>
<p>Each object is identified whether with:</p>
<ul class="simple">
<li><p>its name: it is useful to give names to the objects we want to save. If no name has been given by the user, we can use the default name. The name of each saved object can be checked in the output XML file or with the python <cite>print</cite> command (applied to the <cite>Study</cite> object).</p></li>
<li><p>its id number: this id number is unique to each object. It distinguishes objects with identical type and name (like the default name “Unnamed”). This id number may be checked by printing the study <strong>after</strong> it has been loaded in the python interface (with the <cite>print</cite> command). It can differ from the id number indicated in the XML file the study was loaded from.</p></li>
<li><p>for HDF5 storage (see below): the id serves both as xml id and hdf5 dataset name. Id uniqueness forbids any misleading in reading/writing hdf5 datasets.</p></li>
</ul>
<p>Create a Study Object</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Study</span><span class="p">()</span>
</pre></div>
</div>
<p>Associate it to an XML file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;study.xml&quot;</span>
<span class="n">study</span><span class="o">.</span><span class="n">setStorageManager</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">XMLStorageManager</span><span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
</pre></div>
</div>
<p>Alternatively, large amounts of data can be stored in binary HDF5 file. An XML file (<cite>study_h5.xml</cite>) serves as header for binary data, which are stored in the automatically created <cite>study_h5.h5</cite> file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study_h5</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Study</span><span class="p">()</span>
<span class="n">fileName_h5</span> <span class="o">=</span> <span class="s2">&quot;study_h5.xml&quot;</span>
<span class="n">study_h5</span><span class="o">.</span><span class="n">setStorageManager</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">XMLH5StorageManager</span><span class="p">(</span><span class="n">fileName_h5</span><span class="p">))</span>
</pre></div>
</div>
<p>Add an object to the study; at this point it is not written to disk yet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;distribution&quot;</span><span class="p">,</span> <span class="n">distribution</span><span class="p">)</span>
<span class="n">study</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>
</pre></div>
</div>
<p>Save the study; this writes into the file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<p>Create a new study associated to the same file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Study</span><span class="p">()</span>
<span class="n">study</span><span class="o">.</span><span class="n">setStorageManager</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">XMLStorageManager</span><span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
</pre></div>
</div>
<p>Load the file and all its objects</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
<p>Check the content of the myStudy</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Study = &quot;</span><span class="p">,</span> <span class="n">study</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Study =    196 =&gt; FunctionImplementation
[x1,x2]-&gt;[x1 + x2]
  197 =&gt; Normal
Normal(mu = 4, sigma = 3)
  &#39;distribution&#39; is aliased to 197
  &#39;function&#39; is aliased to 196
</pre></div>
</div>
<p>List names of stored objects</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">printLabels</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;distribution;function&#39;
</pre></div>
</div>
<p>Check our ‘distribution’ labelled object was loaded</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">study</span><span class="o">.</span><span class="n">hasObject</span><span class="p">(</span><span class="s2">&quot;distribution&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>Load the objects; we must create a void object of the desired type (or parent type)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">distribution2</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">()</span>
<span class="n">function2</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Function</span><span class="p">()</span>
<span class="n">study</span><span class="o">.</span><span class="n">fillObject</span><span class="p">(</span><span class="s2">&quot;distribution&quot;</span><span class="p">,</span> <span class="n">distribution2</span><span class="p">)</span>
<span class="n">study</span><span class="o">.</span><span class="n">fillObject</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="n">function2</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">distribution2</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">function2</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;Normal(mu = 4, sigma = 3)&#39;, &#39;[x1,x2]-&gt;[x1 + x2]&#39;)
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.017 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-numerical-methods-general-methods-plot-study-save-load-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/fc489e9f858d8b328113b6d5fac571a4/plot_study_save_load.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_study_save_load.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/9362c9332bd7aab20ba61a35f2ad53b4/plot_study_save_load.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_study_save_load.ipynb</span></code></a></p>
</div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plot_ifs.html" title="Iterated Functions System"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_estimate_integral_iterated_quadrature.html" title="Estimate an integral"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.21dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Numerical methods</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" >General methods</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Save/load a study</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2022 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Jan 01, 2022.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>