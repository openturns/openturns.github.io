
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_surrogate_modeling/polynomial_chaos/plot_chaos_draw_validation.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_surrogate_modeling_polynomial_chaos_plot_chaos_draw_validation.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_surrogate_modeling_polynomial_chaos_plot_chaos_draw_validation.py:


Validate a polynomial chaos
===========================

.. GENERATED FROM PYTHON SOURCE LINES 7-8

In this example, we show how to perform the validation plot of a polynomial chaos for the :ref:`Ishigami function <use-case-ishigami>`.

.. GENERATED FROM PYTHON SOURCE LINES 11-15

.. code-block:: Python

    from openturns.usecases import ishigami_function
    import openturns as ot
    import openturns.viewer as otv








.. GENERATED FROM PYTHON SOURCE LINES 16-18

Model description
-----------------

.. GENERATED FROM PYTHON SOURCE LINES 20-21

We load the Ishigami test function from the usecases module :

.. GENERATED FROM PYTHON SOURCE LINES 21-23

.. code-block:: Python

    im = ishigami_function.IshigamiModel()








.. GENERATED FROM PYTHON SOURCE LINES 24-27

The model contains the input distribution :math:`X=(X_1, X_2, X_3)` in
`im.distribution` and the Ishigami function in `im.model`.
We also have access to the input variable names with

.. GENERATED FROM PYTHON SOURCE LINES 27-29

.. code-block:: Python

    input_names = im.distribution.getDescription()








.. GENERATED FROM PYTHON SOURCE LINES 30-34

.. code-block:: Python

    N = 100
    inputTrain = im.distribution.getSample(N)
    outputTrain = im.model(inputTrain)








.. GENERATED FROM PYTHON SOURCE LINES 35-37

Create the chaos
----------------

.. GENERATED FROM PYTHON SOURCE LINES 39-40

We could use only the input and output training samples: in this case, the distribution of the input sample is computed by selecting the best distribution that fits the data.

.. GENERATED FROM PYTHON SOURCE LINES 42-44

.. code-block:: Python

    chaosalgo = ot.FunctionalChaosAlgorithm(inputTrain, outputTrain)








.. GENERATED FROM PYTHON SOURCE LINES 45-48

Since the input distribution is known in our particular case,
we instead create the multivariate basis from the distribution,
that is three independent variables :math:`X_1` , :math:`X_2` and :math:`X_3` .

.. GENERATED FROM PYTHON SOURCE LINES 50-56

.. code-block:: Python

    multivariateBasis = ot.OrthogonalProductPolynomialFactory([im.X1, im.X2, im.X3])
    totalDegree = 8
    enumfunc = multivariateBasis.getEnumerateFunction()
    basisSize = enumfunc.getBasisSizeFromTotalDegree(totalDegree)
    adaptiveStrategy = ot.FixedStrategy(multivariateBasis, basisSize)








.. GENERATED FROM PYTHON SOURCE LINES 57-62

.. code-block:: Python

    selectionAlgorithm = ot.LeastSquaresMetaModelSelectionFactory()
    projectionStrategy = ot.LeastSquaresStrategy(
        inputTrain, outputTrain, selectionAlgorithm
    )








.. GENERATED FROM PYTHON SOURCE LINES 63-67

.. code-block:: Python

    chaosalgo = ot.FunctionalChaosAlgorithm(
        inputTrain, outputTrain, im.distribution, adaptiveStrategy, projectionStrategy
    )








.. GENERATED FROM PYTHON SOURCE LINES 68-72

.. code-block:: Python

    chaosalgo.run()
    result = chaosalgo.getResult()
    metamodel = result.getMetaModel()








.. GENERATED FROM PYTHON SOURCE LINES 73-75

Validation of the metamodel
---------------------------

.. GENERATED FROM PYTHON SOURCE LINES 77-78

In order to validate the metamodel, we generate a test sample.

.. GENERATED FROM PYTHON SOURCE LINES 80-88

.. code-block:: Python

    n_valid = 1000
    inputTest = im.distribution.getSample(n_valid)
    outputTest = im.model(inputTest)
    metamodelPredictions = metamodel(inputTest)
    val = ot.MetaModelValidation(outputTest, metamodelPredictions)
    r2Score = val.computeR2Score()[0]
    r2Score





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    0.9992361845215688



.. GENERATED FROM PYTHON SOURCE LINES 89-90

The :math:`R^2` is very close to 1: the metamodel seems very accurate.

.. GENERATED FROM PYTHON SOURCE LINES 92-96

.. code-block:: Python

    graph = val.drawValidation()
    graph.setTitle("R2=%.2f%%" % (r2Score * 100))
    view = otv.View(graph)




.. image-sg:: /auto_surrogate_modeling/polynomial_chaos/images/sphx_glr_plot_chaos_draw_validation_001.svg
   :alt: R2=99.92%
   :srcset: /auto_surrogate_modeling/polynomial_chaos/images/sphx_glr_plot_chaos_draw_validation_001.svg
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 97-98

The metamodel has a good predictivity, since the points are almost on the first diagonal.

.. GENERATED FROM PYTHON SOURCE LINES 100-101

Display all figures

.. GENERATED FROM PYTHON SOURCE LINES 101-102

.. code-block:: Python

    otv.View.ShowAll()








.. _sphx_glr_download_auto_surrogate_modeling_polynomial_chaos_plot_chaos_draw_validation.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_chaos_draw_validation.ipynb <plot_chaos_draw_validation.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_chaos_draw_validation.py <plot_chaos_draw_validation.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_chaos_draw_validation.zip <plot_chaos_draw_validation.zip>`
