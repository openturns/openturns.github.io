<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Gaussian Process Regression: Normalization for optimization &#8212; OpenTURNS 1.26 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../../_static/openturns.css?v=105494d3" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=4652c2b6" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/sphx_glr.css?v=2ae27345" />
    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=7c73cb4c"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=35a8b989"></script>
    <script src="../../_static/js/mysearchtools.js?v=a003391d"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Gaussian Process Regression: use an isotropic covariance kernel" href="plot_gpr_isotropic.html" />
    <link rel="prev" title="Gaussian Process Regression : generate trajectories from the metamodel" href="plot_gpr_simulate.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://openturns.discourse.group/">Forum</a></li>
    <li><a href="https://github.com/openturns/openturns/wiki/Modules">Modules</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plot_gpr_isotropic.html" title="Gaussian Process Regression: use an isotropic covariance kernel"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_gpr_simulate.html" title="Gaussian Process Regression : generate trajectories from the metamodel"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.26 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Surrogate modeling</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" accesskey="U">Gaussian Process Regression</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Gaussian Process Regression: Normalization for optimization</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Gaussian Process Regression: Normalization for optimization</a><ul>
<li><a class="reference internal" href="#loading-of-the-fire-satellite-use-case">Loading of the fire satellite use case</a></li>
<li><a class="reference internal" href="#generation-of-data">Generation of data</a></li>
<li><a class="reference internal" href="#creation-of-metamodel">Creation of metamodel</a></li>
<li><a class="reference internal" href="#training-without-normalization">Training without normalization</a></li>
<li><a class="reference internal" href="#training-with-normalization">Training with normalization</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="plot_gpr_simulate.html"
                          title="previous chapter">Gaussian Process Regression : generate trajectories from the metamodel</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="plot_gpr_isotropic.html"
                          title="next chapter">Gaussian Process Regression: use an isotropic covariance kernel</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/auto_surrogate_modeling/gaussian_process_regression/plot_gpr_normalization.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-surrogate-modeling-gaussian-process-regression-plot-gpr-normalization-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<section class="sphx-glr-example-title" id="gaussian-process-regression-normalization-for-optimization">
<span id="sphx-glr-auto-surrogate-modeling-gaussian-process-regression-plot-gpr-normalization-py"></span><h1>Gaussian Process Regression: Normalization for optimization<a class="headerlink" href="#gaussian-process-regression-normalization-for-optimization" title="Link to this heading">¶</a></h1>
<p>This example aims to illustrate Gaussian Process Fitter metamodel with normalization of data.
Like other machine learning techniques, heteregeneous data (i.e., data defined with different orders of magnitude)
can impact the training process of Gaussian Process Regression (GPR).
Automatic scaling process of the input data for the optimization of GPR hyperparameters can be defined using
the <a class="reference internal" href="../../user_manual/_generated/openturns.ResourceMap.html#openturns.ResourceMap" title="openturns.ResourceMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceMap</span></code></a> key <cite>GaussianProcessFitter-OptimizationNormalization</cite>.
In this example, we show the behavior of Gaussian Process Fitter with and without activating
the normalization of hyperparameters for the optimization.</p>
<section id="loading-of-the-fire-satellite-use-case">
<h2>Loading of the fire satellite use case<a class="headerlink" href="#loading-of-the-fire-satellite-use-case" title="Link to this heading">¶</a></h2>
<p>This model involves 9 input variables and 3 output variables. We select only the first output variable in this example.
We load the <a class="reference internal" href="../../usecases/use_case_fire_satellite.html#use-case-fire-satellite"><span class="std std-ref">Fire satellite use case</span></a>.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">openturns</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ot</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openturns.usecases.fire_satellite</span><span class="w"> </span><span class="kn">import</span> <span class="n">FireSatelliteModel</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">openturns.viewer</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">otv</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">openturns.experimental</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">otexp</span>
</pre></div>
</div>
<p>We define the function that evaluates the outputs depending on the inputs.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">FireSatelliteModel</span><span class="p">()</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">model</span>
</pre></div>
</div>
<p>We also define the distribution of input variables to build the training and test sets.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">inputDistribution</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">inputDistribution</span>
</pre></div>
</div>
</section>
<section id="generation-of-data">
<h2>Generation of data<a class="headerlink" href="#generation-of-data" title="Link to this heading">¶</a></h2>
<p>We now generate the input and output training sets as 20 times the dimension of the input vector.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">experiment</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LHSExperiment</span><span class="p">(</span><span class="n">inputDistribution</span><span class="p">,</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">dim</span><span class="p">)</span>
<span class="n">inputTrainingSet</span> <span class="o">=</span> <span class="n">experiment</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
<span class="n">outputTrainingSet</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">inputTrainingSet</span><span class="p">)</span><span class="o">.</span><span class="n">getMarginal</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lower and upper bounds of inputTrainingSet:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">inputTrainingSet</span><span class="o">.</span><span class="n">getMin</span><span class="p">(),</span> <span class="n">inputTrainingSet</span><span class="o">.</span><span class="n">getMax</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Lower and upper bounds of inputTrainingSet:
[1.54106e+07,875.065,1350.46,12.155,0.980915,0.235389,2.50699,0.895724,0.197372] [2.05626e+07,1124.35,1454.73,17.52,2.99648,0.767386,7.98289,3.05663,1.75649]
</pre></div>
</div>
</section>
<section id="creation-of-metamodel">
<h2>Creation of metamodel<a class="headerlink" href="#creation-of-metamodel" title="Link to this heading">¶</a></h2>
<p>We choose to use a constant trend.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">basis</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LinearBasisFactory</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">dim</span><span class="p">)</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>
</div>
<p>For the purpose of illustration, we consider <a class="reference internal" href="../../user_manual/_generated/openturns.MaternModel.html#openturns.MaternModel" title="openturns.MaternModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaternModel</span></code></a>.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">covarianceModel</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MaternModel</span><span class="p">(</span><span class="n">inputTrainingSet</span><span class="o">.</span><span class="n">computeRange</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="training-without-normalization">
<h2>Training without normalization<a class="headerlink" href="#training-without-normalization" title="Link to this heading">¶</a></h2>
<p>First, we deactivate the normalization option for the optimization.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">ot</span><span class="o">.</span><span class="n">ResourceMap</span><span class="o">.</span><span class="n">SetAsBool</span><span class="p">(</span><span class="s2">&quot;GaussianProcessFitter-OptimizationNormalization&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>We run the algorithm and get the metamodel.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fitter_algo</span> <span class="o">=</span> <span class="n">otexp</span><span class="o">.</span><span class="n">GaussianProcessFitter</span><span class="p">(</span>
    <span class="n">inputTrainingSet</span><span class="p">,</span> <span class="n">outputTrainingSet</span><span class="p">,</span> <span class="n">covarianceModel</span><span class="p">,</span> <span class="n">basis</span>
<span class="p">)</span>
<span class="n">fitter_algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">fitter_result</span> <span class="o">=</span> <span class="n">fitter_algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
<span class="n">gpr_algo</span> <span class="o">=</span> <span class="n">otexp</span><span class="o">.</span><span class="n">GaussianProcessRegression</span><span class="p">(</span><span class="n">fitter_result</span><span class="p">)</span>
<span class="n">gpr_algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">gpr_result</span> <span class="o">=</span> <span class="n">gpr_algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
</pre></div>
</div>
<p>Inspect hyperparameters</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">theta</span> <span class="o">=</span> <span class="n">gpr_result</span><span class="o">.</span><span class="n">getCovarianceModel</span><span class="p">()</span><span class="o">.</span><span class="n">getParameter</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;theta=&quot;</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>theta= [515199,25.7338,12.2715,3.30446,2.33972,1.02203,3.20161,0.829491,0.387141,0.00376948]#10
</pre></div>
</div>
<p>Validation of metamodel
To validate the metamodel, we create a validation set of size equal to 50 times the input vector dimension to evaluate the functions.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gprMetamodel</span> <span class="o">=</span> <span class="n">gpr_result</span><span class="o">.</span><span class="n">getMetaModel</span><span class="p">()</span>
<span class="n">ot</span><span class="o">.</span><span class="n">RandomGenerator</span><span class="o">.</span><span class="n">SetSeed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">experimentTest</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LHSExperiment</span><span class="p">(</span><span class="n">inputDistribution</span><span class="p">,</span> <span class="mi">50</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">dim</span><span class="p">)</span>
<span class="n">inputTestSet</span> <span class="o">=</span> <span class="n">experimentTest</span><span class="o">.</span><span class="n">generate</span><span class="p">()</span>
<span class="n">outputTestSet</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">inputTestSet</span><span class="p">)</span><span class="o">.</span><span class="n">getMarginal</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, we use the <a class="reference internal" href="../../user_manual/_generated/openturns.MetaModelValidation.html#openturns.MetaModelValidation" title="openturns.MetaModelValidation"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaModelValidation</span></code></a> class to validate the metamodel.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">metamodelPredictions</span> <span class="o">=</span> <span class="n">gprMetamodel</span><span class="p">(</span><span class="n">inputTestSet</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MetaModelValidation</span><span class="p">(</span><span class="n">outputTestSet</span><span class="p">,</span> <span class="n">metamodelPredictions</span><span class="p">)</span>
<span class="n">r2Score</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">computeR2Score</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R2=&quot;</span><span class="p">,</span> <span class="n">r2Score</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>R2= [0.6223]
</pre></div>
</div>
<p>Graphical validation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Accuracy of metamodel without activating normalization for optimization&quot;</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">drawValidation</span><span class="p">()</span><span class="o">.</span><span class="n">getGraph</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setLegends</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setLegends</span><span class="p">([</span><span class="s2">&quot;R2 = </span><span class="si">%.2f%%</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">r2Score</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setLegendPosition</span><span class="p">(</span><span class="s2">&quot;upper left&quot;</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setXTitle</span><span class="p">(</span><span class="s2">&quot;Exact function&quot;</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setYTitle</span><span class="p">(</span><span class="s2">&quot;Metamodel prediction&quot;</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">otv</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_gpr_normalization_001.svg" srcset="../../_images/sphx_glr_plot_gpr_normalization_001.svg" alt="Accuracy of metamodel without activating normalization for optimization" class = "sphx-glr-single-img"/></section>
<section id="training-with-normalization">
<h2>Training with normalization<a class="headerlink" href="#training-with-normalization" title="Link to this heading">¶</a></h2>
<p>Then, we activate the normalization option for the optimization.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">ot</span><span class="o">.</span><span class="n">ResourceMap</span><span class="o">.</span><span class="n">SetAsBool</span><span class="p">(</span><span class="s2">&quot;GaussianProcessFitter-OptimizationNormalization&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>We run the algorithm and get the metamodel.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fitter_algo</span> <span class="o">=</span> <span class="n">otexp</span><span class="o">.</span><span class="n">GaussianProcessFitter</span><span class="p">(</span>
    <span class="n">inputTrainingSet</span><span class="p">,</span> <span class="n">outputTrainingSet</span><span class="p">,</span> <span class="n">covarianceModel</span><span class="p">,</span> <span class="n">basis</span>
<span class="p">)</span>
<span class="n">fitter_algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">fitter_result</span> <span class="o">=</span> <span class="n">fitter_algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
<span class="n">gpr_algo</span> <span class="o">=</span> <span class="n">otexp</span><span class="o">.</span><span class="n">GaussianProcessRegression</span><span class="p">(</span><span class="n">fitter_result</span><span class="p">)</span>
<span class="n">gpr_algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">gpr_result</span> <span class="o">=</span> <span class="n">gpr_algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
</pre></div>
</div>
<p>Inspect hyperparameters: we can see that parameters are much different this time</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">theta</span> <span class="o">=</span> <span class="n">gpr_result</span><span class="o">.</span><span class="n">getCovarianceModel</span><span class="p">()</span><span class="o">.</span><span class="n">getParameter</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;theta=&quot;</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>theta= [1.0304e+07,498.57,208.542,10.73,4.03113,1.06399,10.9518,2.55495,0.896912,0.00186723]#10
</pre></div>
</div>
<p>Validation of metamodel</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">gprMetamodel</span> <span class="o">=</span> <span class="n">gpr_result</span><span class="o">.</span><span class="n">getMetaModel</span><span class="p">()</span>
<span class="n">metamodelPredictions</span> <span class="o">=</span> <span class="n">gprMetamodel</span><span class="p">(</span><span class="n">inputTestSet</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MetaModelValidation</span><span class="p">(</span><span class="n">outputTestSet</span><span class="p">,</span> <span class="n">metamodelPredictions</span><span class="p">)</span>
<span class="n">r2Score</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">computeR2Score</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R2=&quot;</span><span class="p">,</span> <span class="n">r2Score</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>R2= [0.999505]
</pre></div>
</div>
<p>Graphical validation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Accuracy of metamodel with activating normalization for optimization&quot;</span>
<span class="n">graph2</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">drawValidation</span><span class="p">()</span><span class="o">.</span><span class="n">getGraph</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">graph2</span><span class="o">.</span><span class="n">setLegends</span><span class="p">([</span><span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="n">graph2</span><span class="o">.</span><span class="n">setLegends</span><span class="p">([</span><span class="s2">&quot;R2 = </span><span class="si">%.2f%%</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">r2Score</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="s2">&quot;&quot;</span><span class="p">])</span>
<span class="n">graph2</span><span class="o">.</span><span class="n">setLegendPosition</span><span class="p">(</span><span class="s2">&quot;upper left&quot;</span><span class="p">)</span>
<span class="n">graph2</span><span class="o">.</span><span class="n">setXTitle</span><span class="p">(</span><span class="s2">&quot;Exact function&quot;</span><span class="p">)</span>
<span class="n">graph2</span><span class="o">.</span><span class="n">setYTitle</span><span class="p">(</span><span class="s2">&quot;Metamodel prediction&quot;</span><span class="p">)</span>
<span class="n">graph2</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">otv</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph2</span><span class="p">)</span>
<span class="n">otv</span><span class="o">.</span><span class="n">View</span><span class="o">.</span><span class="n">ShowAll</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_gpr_normalization_002.svg" srcset="../../_images/sphx_glr_plot_gpr_normalization_002.svg" alt="Accuracy of metamodel with activating normalization for optimization" class = "sphx-glr-single-img"/><div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-surrogate-modeling-gaussian-process-regression-plot-gpr-normalization-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/20233417cf210a251d2ee723332c7c3a/plot_gpr_normalization.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_gpr_normalization.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/792645be4c33eafff4049bb54de2c796/plot_gpr_normalization.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_gpr_normalization.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/de6535b0ee40110a9197b9121c1a1e09/plot_gpr_normalization.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">plot_gpr_normalization.zip</span></code></a></p>
</div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plot_gpr_isotropic.html" title="Gaussian Process Regression: use an isotropic covariance kernel"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_gpr_simulate.html" title="Gaussian Process Regression : generate trajectories from the metamodel"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.26 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Surrogate modeling</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" >Gaussian Process Regression</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Gaussian Process Regression: Normalization for optimization</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2005-2025 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Nov 24, 2025.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>