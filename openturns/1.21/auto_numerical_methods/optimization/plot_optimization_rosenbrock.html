
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Quick start guide to optimization &#8212; OpenTURNS 1.21 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/openturns.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/mysearchtools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Multi-objective optimization using Pagmo" href="plot_optimization_pagmo.html" />
    <link rel="prev" title="Optimization using bonmin" href="plot_optimization_bonmin.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://openturns.discourse.group/">Forum</a></li>
    <li><a href="https://gitter.im/openturns/community">Chat</a></li>
    <li><a href="https://github.com/openturns/openturns/wiki/Modules">Modules</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plot_optimization_pagmo.html" title="Multi-objective optimization using Pagmo"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plot_optimization_bonmin.html" title="Optimization using bonmin"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.21 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Numerical methods</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" accesskey="U">Optimization</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick start guide to optimization</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Quick start guide to optimization</a><ul>
<li><a class="reference internal" href="#definition-of-the-function">Definition of the function</a></li>
<li><a class="reference internal" href="#plot-the-iso-values-of-the-objective-function">Plot the iso-values of the objective function</a></li>
<li><a class="reference internal" href="#create-and-solve-the-optimization-problem">Create and solve the optimization problem</a></li>
<li><a class="reference internal" href="#solving-the-problem-with-nlopt">Solving the problem with NLopt</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="plot_optimization_bonmin.html"
                          title="previous chapter">Optimization using bonmin</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="plot_optimization_pagmo.html"
                          title="next chapter">Multi-objective optimization using Pagmo</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/auto_numerical_methods/optimization/plot_optimization_rosenbrock.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-numerical-methods-optimization-plot-optimization-rosenbrock-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="quick-start-guide-to-optimization">
<span id="sphx-glr-auto-numerical-methods-optimization-plot-optimization-rosenbrock-py"></span><h1>Quick start guide to optimization<a class="headerlink" href="#quick-start-guide-to-optimization" title="Permalink to this heading">Â¶</a></h1>
<p>In this example, we perform the optimization of the Rosenbrock test function.</p>
<p>Let <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAARBAMAAABz4NKpAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAnXRIMt2Lz+mv+2AYv/OLvb/5AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA7ElEQVQoz2NggAH3LwxIgK2jrvWpApIA8wdkaYaT7AyeusjqA9Cl2RkdEHx2AQh97GqoAlSaOQEhzbUBYkj0AbhuJqAQo5AJmO+vJASiMhGG+24H0mEMFWB+lgMXUB8PzAUnWUtXCIBdVAnmV4KN506A6/Y9DrIygWE1mL+agd8AaFVraCjUaZyGQNrfAeJhng8M+kCKWwBhd0EMA4M9A2MAyM0sDxgKQcIBCGk1d6DhDCcmJLgDHfWAuwEkDAupk7wM7IcEGLgvKV87YAV00E5FZH8zddwrZoldCVWLFPjQUEMBGAIogImBPGkARlI396NZpqcAAAAKdEVYdERlcHRoAAAAAAQgTiUVAAAAAElFTkSuQmCC" alt="a, b\in\mathbb{R}" style="vertical-align: -4px"/> be parameters. The Rosenbrock function is defined by</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQwAAAAWBAMAAADHmL/pAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAnYt080gyYOkYr937z7+pyr0UAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADBklEQVRIx61WTWgTQRR+2SSz2WbTREQ8SGHVWtGCrD8VQZBcRHILeBEUGyEQUdoGK1QES8CL9rRFL15sIZ6KSPEgiJcgaOktHrwIQU9CD0JAFOolzpvZn5nZnxLIg81M3r7vfd/8vVmAkdqZN8NEp0/+EJrRGSkV1ocIvwXfhGZ0lm1pm0OEX4NpoUEzStGRIfdqbNIU/oyFZ2M1QcgGJ9hg+KMAhZi4l6qjG5vSwBV+7ohr9L2WiACjwghoQ+3wOYCDcbvIUobcTNif9PkqeWb3QBSqjIA21C43AFpxkcqLXMIM03epao113TmZ3gNxgDACbID0w4MOrB0ecZyN2bDkbqbj3PMlGaE3U0jAGkhTPflaXOgj+e+7BBl6lwwG66KMrWTEwuAfErDGeLXSBJM6F3/e2/EzXmqc4hNrysgOffbNSKIDXMf3cRnk92kbnUG2CJRHkKcLkqFn3r5uXTEuct/V7NtMk5XEIv791aPGakwZ4wvihhFwfUWG9hm2ERFkk1GsV3Q9Jt2nt/HYzzpW+oJbLrK7Gi+JpjQM0sJ9J5VKAbetyKBxW4gIsskoTu8SrLFCRm0CmB4e1nVLYsaRyyTARzDpGdQ/oFkSrsKDxnu9J70eDqEJfxARZJNRbA49gvtYdbDzWJCRs92SKO8NowzkLysHgvk4dW+sQbpPEUI2GcXm0COY4H2d7NLT5spoLjgpXhJNeW90INuHQ7p4PgKcKqMOhRI6g2wRKE8GHu6cA5NaRavhizkHtPKkM8VL4l155E8pmbGiCR4fB2RTkZGBB4gQskWgPIJPuHg23Dn/cIZN7g0LSLvRrvKSeESWsR9g+ezNE4LHx4FmKTL0dgkRQrYIlEtg4DEj3v1Tp4/t9llJfC/LmIupRIjLO4oMCbEUvq2ZDE6gP2MKXDb99ZQvg5VEotyPeSe6gCJOkPgihPALrCLDJSgus+ttXrhUxcBxhZYkfK/tRH+RJSDqPoHG10a3o2UcU5GLsTm1arQ/HoFzqBDE3G0hN4n/EB3SLxL8BxbnzSQoaIdNAAAACnRFWHREZXB0aAD/////+ZjB7wAAAABJRU5ErkJggg==" alt="f(x_1, x_2) = (a-x_1)^2 + b(x_2 - x_1^2)^2"/></p>
</div><p>for any <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAARBAMAAABgN5JdAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAnfNg++kY3Yt0Mr+vz0hznCCIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAzUlEQVQY02NgwA44ezbgkGFYyHAHl9RThnYMMY7QS+HqE4CMM5jqc3gZ1sxmYGBTwyrFy7iAgfcBkljG9vIJUCm+BgY5LiRLihPgujgNmA0YGYT+C9i7ggR7EAautmVY//8PA0N9QypIhq0AJsV+3VUAwmT6GQWimBvgulbnQpls/iDLGRjDy8uhzuB5OAEqVw/2AbMAwq4LZRAmd+dXMF2AkJqxFsI8w3AeHMizYVLcDLyZYCMOfWc4/7UB4S/O0E33uKp9UEMIGhpwAACfITc8MpVqvAAAAAp0RVh0RGVwdGgAAAAAAVAk0ZoAAAAASUVORK5CYII=" alt="\mathbf{x}\in\mathbb{R}^2" style="vertical-align: -1px"/>.
This function is often used with <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAMBAMAAAANL4lAAAAALVBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAOrOgAAAADnRSTlMAnXRIMt2Lz+mv+2AYvwxtY48AAAAJcEhZcwAADsQAAA7EAZUrDhsAAABYSURBVBjTY2DAADsMMMUYHO2wiTLw4RZlFDLBIhrGUAEkectBYAJMlC2AoRJTLVcCw2pMUT8H5geYonYMjAEbMMzlYjgxIQFVLVAR9yXlaweQBU/WdRoAAIQZFicVfgRSAAAACnRFWHREZXB0aAAAAAAAJyPhDAAAAABJRU5ErkJggg==" alt="a=1" style="vertical-align: 0px"/> and <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAANBAMAAADlKAswAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAMs9Ii92d+2B0GK/z6b87bgVuAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA1klEQVQY02Ng1BdgwAfs0fgcl4E4ZQcDQ5t3A5DriirLmPyZgcGWgVeA+QLDRSBfDd04oHQkA9sD1gkMeUBeBRbpzwwcBfwGDO1Aw35Om4AuzfyRgfmXvQCD/QIGlkKGKqDYIyUg0IZKcwClP/YDpQUYmDagGw/WzfERKAdUwd4AsgxVmvEzA+cveQOG+QsY1jNwfsBw2g8GzgL+BobpDAwyDEwJ6HYzhDCwKbA6MCQxMPAw9KJ57AcDQyswWDgCQMHCsTMBRZJr09/NDJyZwECdNruBAQBhiDjspW5LOgAAAAp0RVh0RGVwdGgAAAAAACcj4QwAAAAASUVORK5CYII=" alt="b=100" style="vertical-align: 0px"/>. In this case, the function has a single global minimum at:</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAWBAMAAADNzYTXAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAnfNg++kY3Yt0Mr+vz0hznCCIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABM0lEQVQ4y2NgIBawnihvVGAgARgzVDAcIEVDA4MXwwQEdwKadCIqVwCIuRyQBNjQLbuAys0GYo4CBJ9zTwyqDkYDBgbTBxA2cxxQQQMDA68AkoLUn2hBwsCw8D1EA5fcPyAZwMDA9ABZgyCqhhlAzA9TANJwkoEhH1lBGyOqhip0DbYMHFfawDyh/wL2rgnoYeiAroEFIVffkApTv/cuENwBsRTQNfAjNDD9jMKIJK4ADBsQjmDzn4ChgQ9DAxOSq+vVMDSwKeDxA3fnVwYMP+Dz9BmG8xswrAgDaTBg4LoG4nwG4uVQz11jOPSd4fzXBnQNkgwMOfdjHvB5AJ139us5BoYOqOe8cKTltbBEBhMoI5D42RNQNXBdIKCBawNqNuFOIJS/LFE19BHMkFyo3AVwFgBSLlKP9SS0wgAAAAp0RVh0RGVwdGgA//////mYwe8AAAAASUVORK5CYII=" alt="\mathbf{x}^\star = (1, 1)^T."/></p>
</div><p>This function has a nonlinear least squares structure.</p>
<p><em>References</em></p>
<ul class="simple">
<li><p>Rosenbrock, H.H. (1960). âAn automatic method for finding the greatest or least value of a functionâ. The Computer Journal. 3 (3): 175â184.</p></li>
</ul>
<section id="definition-of-the-function">
<h2>Definition of the function<a class="headerlink" href="#definition-of-the-function" title="Permalink to this heading">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">openturns.viewer</span> <span class="k">as</span> <span class="nn">viewer</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pylab</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">Log</span><span class="o">.</span><span class="n">NONE</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rosenbrock</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">SymbolicFunction</span><span class="p">([</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="s2">&quot;x2&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;(1-x1)^2+100*(x2-x1^2)^2&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x0</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xexact</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Point</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lowerbound</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">]</span>
<span class="n">upperbound</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="plot-the-iso-values-of-the-objective-function">
<h2>Plot the iso-values of the objective function<a class="headerlink" href="#plot-the-iso-values-of-the-objective-function" title="Permalink to this heading">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rosenbrock</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MemoizeFunction</span><span class="p">(</span><span class="n">rosenbrock</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">rosenbrock</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">lowerbound</span><span class="p">,</span> <span class="n">upperbound</span><span class="p">,</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Rosenbrock function&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_optimization_rosenbrock_001.png" srcset="../../_images/sphx_glr_plot_optimization_rosenbrock_001.png" alt="Rosenbrock function" class = "sphx-glr-single-img"/><p>We see that the minimum is on the top right of the picture and the starting point is on the top left of the picture.
Since the function has a long valley following the curve <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAATBAMAAADi0QeVAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAYHS/MosYSN3znc/pr/uvp9FeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA2klEQVQoz2NgwAWYYg0YiAdeDHtJUF3DEMFACrhLimK2aShcxqUX8anmLkBzGY8DHtXLWVC4TQxceAKJUYALhf+dgfEBA4OQiagZukqQmP//v8hC7F8Y2L8xsCtUBExEU4wkxrwbBC4ArfoC0sDFUJ8QgBZvYDF0E76ANDAwrIbFm0QHELSC5VZjeIPlOwPTNyB9CEu8HcL09UcGpgcMjCzfGBagxRtUDMXdDK0MXBsYIlmnsTqgxRtEDA1IgGLHV0VWHT3eIGLoKXjRRRzxhh+gxxt+gBZvOAEAFu08mRnxZUcAAAAKdEVYdERlcHRoAAAAAAO+KrC2AAAAAElFTkSuQmCC" alt="x_2 - x^2=0" style="vertical-align: -3px"/>, the algorithm generally have to follow the bottom of the valley.</p>
</section>
<section id="create-and-solve-the-optimization-problem">
<h2>Create and solve the optimization problem<a class="headerlink" href="#create-and-solve-the-optimization-problem" title="Permalink to this heading">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">OptimizationProblem</span><span class="p">(</span><span class="n">rosenbrock</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">algo</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Cobyla</span><span class="p">(</span><span class="n">problem</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">setMaximumRelativeError</span><span class="p">(</span><span class="mf">1.0e-1</span><span class="p">)</span>  <span class="c1"># on x</span>
<span class="n">algo</span><span class="o">.</span><span class="n">setMaximumEvaluationNumber</span><span class="p">(</span><span class="mi">50000</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">setStartingPoint</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xoptim</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">getOptimalPoint</span><span class="p">()</span>
<span class="n">xoptim</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<p>[0.992501,0.985019]</p>
</div>
<br />
<br /><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">delta</span> <span class="o">=</span> <span class="n">xexact</span> <span class="o">-</span> <span class="n">xoptim</span>
<span class="n">absoluteError</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">norm</span><span class="p">()</span>
<span class="n">absoluteError</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>0.016752861417341336
</pre></div>
</div>
<p>We see that the algorithm found an accurate approximation of the solution.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">getOptimalValue</span><span class="p">()</span>  <span class="c1"># f(x*)</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<p>[5.63863e-05]</p>
</div>
<br />
<br /><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">getEvaluationNumber</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>10520
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">rosenbrock</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">lowerbound</span><span class="p">,</span> <span class="n">upperbound</span><span class="p">,</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">cloud</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Cloud</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">Sample</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">xoptim</span><span class="p">]))</span>
<span class="n">cloud</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">cloud</span><span class="o">.</span><span class="n">setPointStyle</span><span class="p">(</span><span class="s2">&quot;bullet&quot;</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cloud</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Rosenbrock function&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_optimization_rosenbrock_002.png" srcset="../../_images/sphx_glr_plot_optimization_rosenbrock_002.png" alt="Rosenbrock function" class = "sphx-glr-single-img"/><p>We see that the algorithm had to start from the top left of the banana and go to the top right.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drawOptimalValueHistory</span><span class="p">()</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_optimization_rosenbrock_003.png" srcset="../../_images/sphx_glr_plot_optimization_rosenbrock_003.png" alt="Optimal value history" class = "sphx-glr-single-img"/><p>The function value history make the path of the algorithm clear.
In the first step, the algorithm went in the valley, which made the function value decrease rapidly.
Once there, the algorithm had to follow the bottom of the valley so that the function decreased but slowly.
In the final steps, the algorithm found the neighbourhood of the minimum so that the local convergence could take place.</p>
<p>In order to see where the function was evaluated, we use the <cite>getInputSample</cite> method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputSample</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">getInputSample</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">rosenbrock</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">lowerbound</span><span class="p">,</span> <span class="n">upperbound</span><span class="p">,</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Rosenbrock function solved with Cobyla&quot;</span><span class="p">)</span>
<span class="n">cloud</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Cloud</span><span class="p">(</span><span class="n">inputSample</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cloud</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_optimization_rosenbrock_004.png" srcset="../../_images/sphx_glr_plot_optimization_rosenbrock_004.png" alt="Rosenbrock function solved with Cobyla" class = "sphx-glr-single-img"/><p>We see that the algorithm made lots of evaluations in the bottom of the valley before getting in the neighbourhood of the minimum.</p>
</section>
<section id="solving-the-problem-with-nlopt">
<h2>Solving the problem with NLopt<a class="headerlink" href="#solving-the-problem-with-nlopt" title="Permalink to this heading">Â¶</a></h2>
<p>We see that the <cite>Cobyla</cite> algorithm required lots of function evaluations.
This is why we now use the <cite>NLopt</cite> class with the LBFGS algorithm.
However, the algorithm may use input points which are far away from the input domain we used so far.
This is why we had bounds to the problem, so that the algorithm never goes to far away from the valley.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bounds</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="n">lowerbound</span><span class="p">,</span> <span class="n">upperbound</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">OptimizationProblem</span><span class="p">(</span><span class="n">rosenbrock</span><span class="p">)</span>
<span class="n">problem</span><span class="o">.</span><span class="n">setBounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">algo</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">NLopt</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="s2">&quot;LD_LBFGS&quot;</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">setStartingPoint</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">algo</span><span class="o">.</span><span class="n">getResult</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xoptim</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">getOptimalPoint</span><span class="p">()</span>
<span class="n">xoptim</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<p>[1,1]</p>
</div>
<br />
<br /><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">delta</span> <span class="o">=</span> <span class="n">xexact</span> <span class="o">-</span> <span class="n">xoptim</span>
<span class="n">absoluteError</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">norm</span><span class="p">()</span>
<span class="n">absoluteError</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>7.740583643426769e-12
</pre></div>
</div>
<p>We see that the algorithm found an extremely accurate approximation of the solution.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">getOptimalValue</span><span class="p">()</span>  <span class="c1"># f(x*)</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<p>[1.77616e-23]</p>
</div>
<br />
<br /><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="o">.</span><span class="n">getEvaluationNumber</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>44
</pre></div>
</div>
<p>This number of iterations is much less than the previous experiment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputSample</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">getInputSample</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">rosenbrock</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">lowerbound</span><span class="p">,</span> <span class="n">upperbound</span><span class="p">,</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;Rosenbrock function solved with NLopt/LD_LBFGS&quot;</span><span class="p">)</span>
<span class="n">cloud</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Cloud</span><span class="p">(</span><span class="n">inputSample</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cloud</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">viewer</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_optimization_rosenbrock_005.png" srcset="../../_images/sphx_glr_plot_optimization_rosenbrock_005.png" alt="Rosenbrock function solved with NLopt/LD_LBFGS" class = "sphx-glr-single-img"/><div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-numerical-methods-optimization-plot-optimization-rosenbrock-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/3326be481fe7c317113b840e171d72ed/plot_optimization_rosenbrock.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_optimization_rosenbrock.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/3ebf1760b853682393505c1c2fb11f8e/plot_optimization_rosenbrock.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_optimization_rosenbrock.ipynb</span></code></a></p>
</div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plot_optimization_pagmo.html" title="Multi-objective optimization using Pagmo"
             >next</a> |</li>
        <li class="right" >
          <a href="plot_optimization_bonmin.html" title="Optimization using bonmin"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.21 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Numerical methods</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" >Optimization</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quick start guide to optimization</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2023 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Jun 21, 2023.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>