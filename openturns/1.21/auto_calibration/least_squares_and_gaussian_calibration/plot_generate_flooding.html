
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Generate flooding model observations &#8212; OpenTURNS 1.21rc1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/openturns.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/mysearchtools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Calibrate a parametric model: a quick-start guide to calibration" href="plot_calibration_quickstart.html" />
    <link rel="prev" title="Least squares and gaussian calibration" href="index.html" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="http://www.openturns.org/">Home</a></li>
    <li><a href="../../install.html">Get it</a></li>
    <li><a href="../../contents.html">Doc</a></li>
    <li><a href="https://openturns.discourse.group/">Forum</a></li>
    <li><a href="https://gitter.im/openturns/community">Chat</a></li>
    <li><a href="https://github.com/openturns/openturns/wiki/Modules">Modules</a></li>
    <li><a href="https://github.com/openturns">Code</a></li>
    <li><a href="https://github.com/openturns/openturns/issues">Bugs</a></li>
  </ul>
  <a href="../../index.html">
    <h1>
      <img src="../../_static/logo-openturns-wo-bg.png" alt="" width=100px height=100px />
      OpenTURNS
    </h1>
    <h2> An Open source initiative for the Treatment of Uncertainties, Risks'N Statistics</h2>
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="plot_calibration_quickstart.html" title="Calibrate a parametric model: a quick-start guide to calibration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Least squares and gaussian calibration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.21rc1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Calibration</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" accesskey="U">Least squares and gaussian calibration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Generate flooding model observations</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Generate flooding model observations</a><ul>
<li><a class="reference internal" href="#parameters-to-calibrate">Parameters to calibrate</a></li>
<li><a class="reference internal" href="#observations">Observations</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">Least squares and gaussian calibration</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="plot_calibration_quickstart.html"
                          title="next chapter">Calibrate a parametric model: a quick-start guide to calibration</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/auto_calibration/least_squares_and_gaussian_calibration/plot_generate_flooding.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-calibration-least-squares-and-gaussian-calibration-plot-generate-flooding-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="generate-flooding-model-observations">
<span id="sphx-glr-auto-calibration-least-squares-and-gaussian-calibration-plot-generate-flooding-py"></span><h1>Generate flooding model observations<a class="headerlink" href="#generate-flooding-model-observations" title="Permalink to this heading">¶</a></h1>
<p>In this example we are interested in the calibration of the <a class="reference internal" href="../../usecases/use_case_flood_model.html#use-case-flood-model"><span class="std std-ref">flooding model</span></a>.
We show how to produce the observations that we use in the calibration
model of <a class="reference internal" href="plot_calibration_flooding.html"><span class="doc">Calibration of the flooding model</span></a>.</p>
<p>In practice, we generally use a data set which has been obtained from
measurements.
In this example, we generate the data using noisy observations of the
physical model.
In the next part, we will calibrate the parameters using the calibration
algorithms.</p>
<section id="parameters-to-calibrate">
<h2>Parameters to calibrate<a class="headerlink" href="#parameters-to-calibrate" title="Permalink to this heading">¶</a></h2>
<p>The variables to calibrate are <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAATBAMAAADrOqfvAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAGJ3PYOl0i90y+/NIv69ILDK6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABdElEQVQoz42TPUvDQBjH/23aXK6Nsbg4ZAni5GKECg4OFfwA/QjBpVM1gqNDHJwNiDhJaxcXFargnMVJaOPkqINTRdvBzRZ9rmJykRQauHvye/jfy/NyQMbCtF9WTAqNt5GDnZvI/3z70a+mUCakaZGG5gFb8T53QK+URjUaYumsBTWIBNwCG6ZSHlBdst0Au/H2jBxOKhkONJ/sMuYTgfFWOuVsFIRd0y8TejOcQE0UhWltXiX0h5NogBNx4Mjvy4KZ9iQ6x70IaYCGKymWfDjp1IYpSlaFFtcHuU/ASqfmON7CC1RKMav9Ouks3WK2KdHca/10e6zPU+kaFYAC7rCAr1DVr4EH323nIdEw61FmuIesA+OoDOM7RHcd+gU1x+h99Qu8yiTSPaVC5zEX3I5uqveo3FEvWmqCiqU6LabLHERyW5EUhrMhkRKYKLs4pt+zP19mbx9x5vhTRSINHSwEeBT5cuTiJOAfgY172J/6fXHgB8E0YOPIYzk1AAAACnRFWHREZXB0aAAAAAAFV0kVgwAAAABJRU5ErkJggg==" alt="(K_s,Z_v,Z_m)" style="vertical-align: -5px"/> and are set to the following values:</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARsAAAARBAMAAAAf7xXAAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAr/O/dJ3dSIsYz/tgMunYU1txAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACa0lEQVRIx7WVz2vUQBTHv9kmnWRN3PXHQXDBgIp4EFcFD4ViPAiCh+6i1rIemoMHPdjGg14KbgSLrRTMRRB6aS8WS8WCFLVQ2IOKoLDBHxeF7voHFItVtqJVJ5u2ks1Ml1lwDsPMy3zefPPmzRsAW5csdO2FWGv7Or7lN/4H1G4DJ2LWoUIOek+GByUsSM8ajfM7un28uFESgkLM+Dx4OZylcpCdxiWSi++4js0+x/MH4E4MevvzIUgVCxCBQsw4OLu6VdHBcGyJZGMWF6BkOZ5dkG8x4/sg1hZOQwQKMcNam/XiHovVllGDPs094085pt+Ug9cQgRrl3CdPWKRSJSsgP3iOtd2MwxjKoOij6IlAIWb0rKXczJvH6186JmkbD0bqEehUzgr3AlTX70vATKbp6C4STtkPFDWFGjEth311s7Hk72Kh6iWqRefKOcwMQZtNtZR9MSjAaHc03HYRFZe1ps+oQeYdljIHmWWerjjo8sSgAKPd+fowWY3EcLUlHRzzfkHmpXK5BCVm3ANlMVXCKYhAIUZLUm99sikNuUaDdDKSOxULj3ARyhjbsbEMXMVtzYwkwQKNeruLAjaAtPzzzpvpGEYLXHhYFZrRNJevqJECJXnaDF7SMmg8YHkeTYMcUBNeNKzDGPV1m7r/6PGhlNMNM4apnjYXYFL/FKQ/WRQnomy+YEE+kwF5yvLcf6jji4l5RJNOzXfS9+Z4CQMuH7qGKc2MY4PbfAz8uwNkJyfEMr+onYXF+WJtBO2Xs83eUTKWFJezXffE5UxoZvJVMznayC1xz+9GxH8BNkkr59Bys1pg5FY3+wvJwr8l/7KNMwAAAAp0RVh0RGVwdGgA/////ReWoMMAAAAASUVORK5CYII=" alt="K_s = 30, \qquad Z_v = 50, \qquad Z_m = 55."/></p>
</div><p>This is the set of <em>true</em> values that we wish to estimate with the calibration methods.
In practical studies, these values are unknown.
In this study, we will simulate noisy observations of the output of the model
and estimate the parameters using calibration methods.</p>
</section>
<section id="observations">
<h2>Observations<a class="headerlink" href="#observations" title="Permalink to this heading">¶</a></h2>
<p>In this section, we describe the statistical model associated with the <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAIBAMAAADdFhi7AAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAdJ2LGM9IMmD73fO/r+mGTbZDAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAP0lEQVQI12NgVHY2TWBgqMg0YFzAwCBgzcAUwMDAcJaBVQFIzWDgL2BgYP/AIMfBwMD8gOEsMwMDkwFDrggDAP0FCNj5FTHGAAAACnRFWHREZXB0aAAAAAAAJyPhDAAAAABJRU5ErkJggg==" alt="n" style="vertical-align: 0px"/> observations.
The errors of the water heights are associated with a normal distribution
with a zero mean and a standard variation equal to:</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAMBAMAAADIXRPRAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAi/P7z78YMt2dYOlIdK/O4RSDAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAn0lEQVQY02NgwABcE1+B6dUHGLCC0wzcBUCq8jwO+V4GzgAQzY9D/g8DlwGSPKP+/8/I0jzfGXi+Icm7pneCKFYXEHgAdN53kBK4PGMDw2oGNP1cSPLMBxhuoMiz/2HgRTK/mIEhDtV9vxh4kdwHNNwMxX6GRgZOByTzGVguoOpfAQwfdjeg/AIGIMUzdw6a/3nnvmLgMWfI8993gMccAAGuLgZnugqyAAAACnRFWHREZXB0aAD////5EPtk2gAAAABJRU5ErkJggg==" alt="\sigma=0.1."/></p>
</div><p>Therefore, the observed water heights are:</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAAATBAMAAAAe6O4aAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAr/O/dBj7YN3pz52LSDLi5wBxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACvElEQVRIx51VTWgTQRh9m2Sbv9k1UWhVhKgYlQqSi5cQcLVHhazxWA8VKQhVyEERPOUi6EVz8VJB0oO0FYRIxYMR3INFqChbz0Jz9QcajCD+pPrtbNyd3UwqdmGXefO9mTfzfW9mgc2fSWztScu7t3eNMwfHwr3qs2zzE9Bw9J4vmSIb5SMePD6ezdUlSC1ItRI1YHag96SBs4eQrgLsBvTpAPuUTzsAjJoydFqqta0J/BrIwVEg3kGSmjv7r8eO2R7Sm2A9KUr20xOcds1GfCOsVW7Tp+6sLu7sqSyyl30aow5DihS3waqBaV9QYCqsdd75ZHAbGLFcBY99LkDUZ+Qo3pBpLVARGuEU8o2aoDXk+Da9mixolwPMSmEImgpoPXbNdzGbzVluT/EhPXPUiPS9tRc4zA3mTTFz7UJA69Yw1BG1km5G9R5PUcwK+MVdn06SP53G+N+43m3nRGI0PwxNi1pF15msw0s26M2l75ZWh/rVSb7nHWKvi6t62oYhR3mep8VZnqcfWT4oRWu/GdYaycBRUSmHl5yUemUgdsI/u4h/A5pyJNZL3fCnJfesBOql1N0N04Ci2rKL/ThnxyjprH9UaY9akzUqApocm/h8IuwN0mLkv/WqUzIWMQMb2wdcJ727ZK33WMk4cf0BOBtkjlVmO1Clo/GubeWTEFAvXYtQYWuiVgmw8lDuzKu7ulV8CJl+rmUT7Qk1d7++jzbFNcomsaH8LmDtEYeJ7o7FL+QgJiCtlqrSPpklaikvl3U/9Xuk99dH/m2ohhOP+f3aqADTzVgARcwJEjZDZ1nxLZW3pPcyH5GP8rivpTVSwuyKcVVAKbuCeau/SqheaSL+fVNqy7R0bsD993jcN7f66g18qJeqAkpgFS0bx8JTRd/+6593hR8b9wozgiFjEwRm////Vd/if1k27g8+v8VunXkZAQAAAAp0RVh0RGVwdGgA/////o6f8XkAAAAASUVORK5CYII=" alt="H_i = G(Q_i,K_s,Z_v,Z_m) + \epsilon_i"/></p>
</div><p>for <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFEAAAAQBAMAAACcpY7MAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAYPMySHS/GPuvi8/pnd2jAyobAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAqklEQVQoz2NgYFRgQAaMRxhwAWYBFN6VLwzEAiqoZAkjqJL1VtVqBwaGUg4gwZC9Gwh24lBp6LGA9QEDg4A9QTMDFjHwbgDS0wi7M5OB+wKQaiGsspGB3wDoXAUBQu5k/sAQw8jAwDlhAar4RwYG6wIQZt4OIRi4DjBkcgFDaWoBsjr22X+mMHgANXsYsDSDiC4GBt4FDJ7hOAI5ACkw8ccT0SpZsWsiViUAI+cuJFx6gSEAAAAKdEVYdERlcHRoAAAAAAQgTiUVAAAAAElFTkSuQmCC" alt="i=1,...,n" style="vertical-align: -4px"/> where</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAAAWBAMAAAAiD+/pAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAna9g6XS/z4sYMvP7SN2t3s6tAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABsElEQVQ4y5VTTUgCQRT+dHN1/VshKIgiEQKP26lDgV46ZJe1CIoCvQZRInQXT1FkW4c6dGiDyE567mbRtTDoVuDewm51DMrejGutukg+eDOP9833zZt5M8C/zZVPoz87R7ZPxhMKveANA1KoMxlByHbxErn7QYW7E5CucWzLuCM/Ih8EJvOKBXBX4crZEKSGBoxQEEcgjoQFGfOyZLcJW6RD90hyQRVDFkBxABM2DM8z6YSBoA65ipk/oNz4AKYocESUNobo+CQ5wA/UdNQ0ntxrNCo8oCxmebR6S8MKZ3jf4aTZB8R0RmJnXi+Z9yrTggwLAomiwWsBrjAPkeYLvkeMMwoQzCP7NcjZKBPWsAkYLLeLA+WQtxjlKlK8qnu4jCbDp+GMi5Co+HaisjANObNI8ymVoGCNpbwViGG0ziFzhod89Ia3IwznV7iJBXMY5vcaZ9W0GGJ7FyWnDumbPesBDYJBHSzS2gq2TbxEHl3WLIzUKw3jbA8H1ZhcUPBCko/JqonvdPVves6sEd6MmVKteL3Xg6/bMH5lbO3S/KxtD0LrxRDUbsZ+72+q26Z+AHpfWEoYyA+YAAAACnRFWHREZXB0aAD/////+ZjB7wAAAABJRU5ErkJggg==" alt="\epsilon \sim \mathcal{N}(0,\sigma^2)"/></p>
</div><p>and we make the hypothesis that the observation errors are independent.
We consider a sample size equal to:</p>
<div class="math">
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAAMBAMAAAAqgQioAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAdJ2LGM9IMmD73fO/r+mGTbZDAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAo0lEQVQY02NgwAR9CQwMTbYNDFhBUX4CA9sDhufYZRn4Exi4BBh0cMsCUSeIyajsbJqAIZtfwJDvAGRWZBowLgDSPKEgcAEq218AUsDAIGDNwBSATW8/SJbhLAOrAoZsfQKDPMhkhhkM/AWYrmpgkAQx2T8wyHFg2MtlwKAKYjI/YDjLjKa3gYFjATA0Sh0YmAwYckVQJH3j3yYwCMk2MGQWAACamyW2Qg8fJAAAAAp0RVh0RGVwdGgA////+RD7ZNoAAAAASUVORK5CYII=" alt="n = 10."/></p>
</div><p>The observations are the couples <img class="math" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAAUBAMAAAC5YpSHAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAGL9g6Z0ySHTd88+L+6+Dk2LmAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACCUlEQVQ4y5VUPWgUURD+Nnt5d3u3d25zjZH82J7glgabWCQEYnEEhBAUD0yVFC7YCreIjSDk0gSs9DpNEFZS2W1jmjSxsBAsEpJGo5sQyE9h4ffeu93c3XJ3OMvsm5k3376Z7w0LGDddoIweMkx9hn6SqfIVUMsP550k+uvUH/14ABjjgHm/H/5ajaewBHsN4msStRrAnDReU+vOAHyG68+WtqKs6q8qjzpWG4DnIaY8ezWJ1j2Y59Io+TqlL34dKIYa1ZLHRO5KwwwG4GVxzDyW9mrS6GdSEChrdwC+Tn0HfJD27ST6PYqOQ2WdEO/2hmdnATEFnElnEzkNEheqGemRF3NW3wOv81U3fnKC35iCcSl7PY+j9omiQEqTqEpcQO5lqoBF7rP+HzTz43GwwIreIO4/s5dkL6X5c1ROxXjgVYAdHSwS8U17kj8PdpDGlw9eOJrce8D159jZg513xCduPXUlBfQgGiolbI5GUbTfgQ8v4uFYoHf0ZQY17mfZSentlnF46spsO1QpkuLu87ONgqfxK8oPDB+/ydFVBj1Ll1gK0/jharE1f5aam+YQNWzH01vRI5a/oetfhkiegnf3CfHsQSjiN6aBWzX4V3h6E3rEhrZVwPyzbVUtXz1VCyOsKvee8Tty85Hm2G+/HdvT49MmftdqMkX0Gk+R+v8Ybuf6v5LrWP8BqIR72S4dPfEAAAAKdEVYdERlcHRoAAAAAAbOQEQ5AAAAAElFTkSuQmCC" alt="\{(Q_i,H_i)\}_{i=1,...,n}" style="vertical-align: -6px"/>, i.e. each observation is a
couple made of the flowrate and the corresponding river height.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">openturns</span> <span class="k">as</span> <span class="nn">ot</span>
<span class="kn">import</span> <span class="nn">openturns.viewer</span> <span class="k">as</span> <span class="nn">otv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">openturns.usecases</span> <span class="kn">import</span> <span class="n">flood_model</span>
</pre></div>
</div>
<p>Create the flooding model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">functionFlooding</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
    <span class="n">L</span> <span class="o">=</span> <span class="mf">5.0e3</span>
    <span class="n">B</span> <span class="o">=</span> <span class="mf">300.0</span>
    <span class="n">Q</span><span class="p">,</span> <span class="n">K_s</span><span class="p">,</span> <span class="n">Z_v</span><span class="p">,</span> <span class="n">Z_m</span> <span class="o">=</span> <span class="n">X</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="n">Z_m</span> <span class="o">-</span> <span class="n">Z_v</span><span class="p">)</span> <span class="o">/</span> <span class="n">L</span>
    <span class="n">H</span> <span class="o">=</span> <span class="p">(</span><span class="n">Q</span> <span class="o">/</span> <span class="p">(</span><span class="n">K_s</span> <span class="o">*</span> <span class="n">B</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">alpha</span><span class="p">)))</span> <span class="o">**</span> <span class="p">(</span><span class="mf">3.0</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">H</span><span class="p">]</span>


<span class="n">g</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">PythonFunction</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">functionFlooding</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">MemoizeFunction</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">setInputDescription</span><span class="p">([</span><span class="s2">&quot;Q (m3/s)&quot;</span><span class="p">,</span> <span class="s2">&quot;Ks (m^(1/3)/s)&quot;</span><span class="p">,</span> <span class="s2">&quot;Zv (m)&quot;</span><span class="p">,</span> <span class="s2">&quot;Zm (m)&quot;</span><span class="p">])</span>
<span class="n">g</span><span class="o">.</span><span class="n">setOutputDescription</span><span class="p">([</span><span class="s2">&quot;H (m)&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Print the true values of the parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fm</span> <span class="o">=</span> <span class="n">flood_model</span><span class="o">.</span><span class="n">FloodModel</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parameters&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Ks = &quot;</span><span class="p">,</span> <span class="n">fm</span><span class="o">.</span><span class="n">trueKs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Zv = &quot;</span><span class="p">,</span> <span class="n">fm</span><span class="o">.</span><span class="n">trueZv</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Zm = &quot;</span><span class="p">,</span> <span class="n">fm</span><span class="o">.</span><span class="n">trueZm</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Parameters
   Ks =  30.0
   Zv =  50.0
   Zm =  55.0
</pre></div>
</div>
<p>Create the parametric function.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">calibratedIndices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">thetaTrue</span> <span class="o">=</span> <span class="p">[</span><span class="n">fm</span><span class="o">.</span><span class="n">trueKs</span><span class="p">,</span> <span class="n">fm</span><span class="o">.</span><span class="n">trueZv</span><span class="p">,</span> <span class="n">fm</span><span class="o">.</span><span class="n">trueZm</span><span class="p">]</span>
<span class="n">mycf</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">ParametricFunction</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">calibratedIndices</span><span class="p">,</span> <span class="n">thetaTrue</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a regular grid of the flowrates and evaluate the corresponding outputs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nbobs</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">minQ</span> <span class="o">=</span> <span class="mf">100.0</span>
<span class="n">maxQ</span> <span class="o">=</span> <span class="mf">4000.0</span>
<span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">maxQ</span> <span class="o">-</span> <span class="n">minQ</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">nbobs</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">rg</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">RegularGrid</span><span class="p">(</span><span class="n">minQ</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">nbobs</span><span class="p">)</span>
<span class="n">Qobs</span> <span class="o">=</span> <span class="n">rg</span><span class="o">.</span><span class="n">getVertices</span><span class="p">()</span>
<span class="n">outputH</span> <span class="o">=</span> <span class="n">mycf</span><span class="p">(</span><span class="n">Qobs</span><span class="p">)</span>
</pre></div>
</div>
<p>Generate the observation noise and add it to the output of the model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sigmaObservationNoiseH</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># (m)</span>
<span class="n">noiseH</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">sigmaObservationNoiseH</span><span class="p">)</span>
<span class="n">sampleNoiseH</span> <span class="o">=</span> <span class="n">noiseH</span><span class="o">.</span><span class="n">getSample</span><span class="p">(</span><span class="n">nbobs</span><span class="p">)</span>
<span class="n">Hobs</span> <span class="o">=</span> <span class="n">outputH</span> <span class="o">+</span> <span class="n">sampleNoiseH</span>
</pre></div>
</div>
<p>Gather the data into a sample.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Sample</span><span class="p">(</span><span class="n">nbobs</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Qobs</span>
<span class="n">data</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Hobs</span>
<span class="n">data</span><span class="o">.</span><span class="n">setDescription</span><span class="p">([</span><span class="s2">&quot;Q (m3/s)&quot;</span><span class="p">,</span> <span class="s2">&quot;H (m)&quot;</span><span class="p">])</span>
<span class="n">data</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table>
  <tr><td></td><th>Q (m3/s)</th><th>H (m)</th></tr>
  <tr><th>0</th><td>100</td><td>0.53376</td></tr>
  <tr><th>1</th><td>533.3333</td><td>1.626459</td></tr>
  <tr><th>2</th><td>966.6667</td><td>2.239076</td></tr>
  <tr><th>3</th><td>1400</td><td>2.684735</td></tr>
  <tr><th>4</th><td>1833.333</td><td>3.070806</td></tr>
  <tr><th>5</th><td>2266.667</td><td>3.57745</td></tr>
  <tr><th>6</th><td>2700</td><td>3.788794</td></tr>
  <tr><th>7</th><td>3133.333</td><td>4.139232</td></tr>
  <tr><th>8</th><td>3566.667</td><td>4.543917</td></tr>
  <tr><th>9</th><td>4000</td><td>4.770165</td></tr>
</table>
</div>
<br />
<br /><p>Plot the Y observations versus the X observations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">graph</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="s2">&quot;Observations&quot;</span><span class="p">,</span> <span class="s2">&quot;Q (m3/s)&quot;</span><span class="p">,</span> <span class="s2">&quot;H (m)&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="c1"># Plot the model before calibration</span>
<span class="n">curve</span> <span class="o">=</span> <span class="n">mycf</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">4000.0</span><span class="p">)</span><span class="o">.</span><span class="n">getDrawable</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">curve</span><span class="o">.</span><span class="n">setLegend</span><span class="p">(</span><span class="s2">&quot;True model&quot;</span><span class="p">)</span>
<span class="n">curve</span><span class="o">.</span><span class="n">setLineStyle</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">ResourceMap</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="s2">&quot;CalibrationResult-ObservationLineStyle&quot;</span><span class="p">))</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">curve</span><span class="p">)</span>
<span class="c1"># Plot the noisy observations</span>
<span class="n">cloud</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">Cloud</span><span class="p">(</span><span class="n">Qobs</span><span class="p">,</span> <span class="n">Hobs</span><span class="p">)</span>
<span class="n">cloud</span><span class="o">.</span><span class="n">setLegend</span><span class="p">(</span><span class="s2">&quot;Observations&quot;</span><span class="p">)</span>
<span class="n">cloud</span><span class="o">.</span><span class="n">setPointStyle</span><span class="p">(</span>
    <span class="n">ot</span><span class="o">.</span><span class="n">ResourceMap</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="s2">&quot;CalibrationResult-ObservationPointStyle&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cloud</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setColors</span><span class="p">(</span><span class="n">ot</span><span class="o">.</span><span class="n">Drawable</span><span class="o">.</span><span class="n">BuildDefaultPalette</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setLegendPosition</span><span class="p">(</span><span class="s2">&quot;topleft&quot;</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">otv</span><span class="o">.</span><span class="n">View</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_plot_generate_flooding_001.png" srcset="../../_images/sphx_glr_plot_generate_flooding_001.png" alt="Observations" class = "sphx-glr-single-img"/><p>The data which are actually used in
<a class="reference internal" href="plot_calibration_flooding.html"><span class="doc">Calibration of the flooding model</span></a>
are simplified so that the minimum number of significant digits is printed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">otv</span><span class="o">.</span><span class="n">View</span><span class="o">.</span><span class="n">ShowAll</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-calibration-least-squares-and-gaussian-calibration-plot-generate-flooding-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/1959976a7072b95fbc1679262f443dba/plot_generate_flooding.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_generate_flooding.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/fa93de10cc533622c9ff4d4d46b35c11/plot_generate_flooding.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_generate_flooding.ipynb</span></code></a></p>
</div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="plot_calibration_quickstart.html" title="Calibrate a parametric model: a quick-start guide to calibration"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Least squares and gaussian calibration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OpenTURNS 1.21rc1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../contents.html" >Contents</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../examples/examples.html" >Examples</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Calibration</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" >Least squares and gaussian calibration</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Generate flooding model observations</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2023 Airbus-EDF-IMACS-ONERA-Phimeca.
      Last updated on Jun 20, 2023.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>